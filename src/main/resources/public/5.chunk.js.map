{"version":3,"sources":["webpack:////home/konstantin/svn/rota-client/src/app/admin/schedule3/manage.component.css","webpack:////home/konstantin/svn/rota-client/src/app/admin/schedule3/manage.component.html","webpack:////home/konstantin/svn/rota-client/src/app/admin/schedule3/manage.component.ts","webpack:////home/konstantin/svn/rota-client/src/app/admin/schedule3/manage/confirm-assignment-erase.html","webpack:////home/konstantin/svn/rota-client/src/app/admin/schedule3/manage/confirm-assignment-erase.ts","webpack:////home/konstantin/svn/rota-client/src/app/admin/schedule3/schedule.component.html","webpack:////home/konstantin/svn/rota-client/src/app/admin/schedule3/schedule.component.ts","webpack:////home/konstantin/svn/rota-client/src/app/admin/schedule3/schedule3.module.ts","webpack:////home/konstantin/svn/rota-client/src/app/model/tabbed.component.ts?fc07****"],"names":[],"mappings":"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","file":"5.chunk.js","sourcesContent":["exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"div{\\n    /* border: 1px solid red; */\\n}\\n\\n.hour {\\n    float: left;\\n    width: 5px;\\n    height: 60px;\\n    border-left: 1px #FBFBFB solid;\\n    border-top: 1px #E8E8E7 solid;\\n}\\n\\n.mightyParent{\\n    position: relative;\\n    overflow: hidden;\\n    height: 77vh;\\n    margin-top: -95px;\\n    margin-left: 250px;\\n}\\n\\n.scrollbarX {\\n    position:absolute;\\n    bottom:0px;\\n    overflow-x:scroll;\\n    overflow-y: hidden;\\n    height: 20px;\\n    width: 80%;\\n    left:200px;\\n    z-index: 999;\\n}\\n\\n.scrollbarY {\\n    position:absolute;\\n    bottom:0px;\\n    overflow-x:hidden;\\n    overflow-y:auto;\\n    width: 20px;\\n    right:0px;\\n    z-index: 999;\\n}\\n\\n.timeTableContainer{\\n    position: relative;\\n    margin-top: 95px;\\n    margin-left: 120px;\\n    overflow: hidden;\\n}\\n\\n.timeContainer {\\n    position:absolute;\\n    width: 5px;\\n    height: 100px;\\n    border-bottom: 1px solid #f1f1f1;\\n    /*border: 1px red solid; */\\n}\\n.timeContainer.Spare {\\n    background-color: azure;\\n}\\n\\n.regNoContainer{\\n    position: absolute;\\n    float: left;\\n    width: 120px;\\n    border-right: 1px solid #f1f1f1;\\n}\\n\\n.driverTrailerBox{\\n    overflow: auto;\\n    height: auto;\\n}\\n\\n.driverTrailerContainer{\\n    height: 77vh;\\n    width: 240px;\\n    float: left;\\n}\\n\\n.consultantContainer, .registrarContainer{\\n    width: 100%;\\n    float: left;\\n    height: 38vh;\\n    /* overflow: auto; */\\n    cursor: pointer;\\n}\\n\\n.consultantContainer, .mightyParent, .registrarContainer, .assingmentPanel{\\n    position: relative;\\n    background: #fff;\\n    /* white-space: nowrap; */\\n    box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12);\\n    margin-bottom: 10px;\\n}\\n\\n.assignPanelDetails{\\n    max-height: 160px;\\n    height: 160px;\\n    overflow-y: auto;\\n}\\n\\n.driverHeader, .trailerHeader{\\n    color: #989898;\\n    font-weight: bold;\\n    text-transform: uppercase;\\n    padding-left: 35px;\\n    padding-right: 35px;\\n    padding-top: 12px;\\n    padding-bottom: 12px;\\n    background: #fbfbfb;\\n}\\n\\n.driverHeader input, .trailerHeader input{\\n    border: none;\\n    border-bottom: 1px solid #C7C7C7;\\n    background: transparent;\\n}\\n\\n::-webkit-input-placeholder { /* Chrome/Opera/Safari */\\n    font-size: 12px;\\n  }\\n  ::-moz-placeholder { /* Firefox 19+ */\\n    font-size: 12px;\\n  }\\n  :-ms-input-placeholder { /* IE 10+ */\\n    font-size: 12px;\\n  }\\n  :-moz-placeholder { /* Firefox 18- */\\n    font-size: 12px;\\n  }\\n\\n.employee {\\n    /* left: 20px;\\n    top: 0px;\\n    position:absolute;\\n    width: auto;\\n    height: 40px;\\n    color: #7e7e7e;\\n    font-weight: bold;\\n    padding: 10px;\\n    margin-top: 10px;\\n     */\\n     width: auto;\\n     height: 21px;\\n     color: #7e7e7e;\\n     font-weight: bold;\\n     padding: 0px;\\n}\\n\\n.employee:hover{\\n    background-color: aliceblue;\\n}\\n\\n.consultantContainer .driver:hover{\\n    color: #252525;\\n}\\n\\n\\n.assingmentPanel{\\n    /* position: absolute;\\n    bottom:0px;\\n    height: 200px;\\n    width:350px;\\n    right:2%;\\n    display: block;\\n    overflow: auto;\\n    padding: 10px;\\n    z-index: 1000; */\\n}\\n\\n.assingmentPanel .tabs{\\n    background-color: #ececec;\\n    border-radius: 5px;\\n    font-weight: normal;\\n    line-height: 28px;\\n    height: 30px;\\n    padding: 0 4px;\\n    cursor: pointer;\\n    box-sizing: border-box;\\n    opacity: .6;\\n    text-align: center;\\n    display: inline-block;\\n    vertical-align: top;\\n    text-decoration: none;\\n    position: relative;\\n    overflow: hidden;\\n    border-bottom: 2px solid #FFFFFF;\\n}\\n\\n.assingmentPanel .tabs:active,\\n.assingmentPanel .tabs:hover,\\n.assingmentPanel .tabs:focus{\\n    border-bottom: 2px solid #3f51b5;\\n}\\n\\n.assingmentPanel .tabs_active{\\n    border-bottom: 2px solid #3f51b5;\\n}\\n\\n.assingmentPanel .driver:hover{\\n    color: #7e7e7e;\\n}\\n\\n.assignPanelDetails {\\n    padding: 1em;\\n}\\n\\n.assignPanelDetails .fa-trash{\\n    color: #252525;\\n}\\n\\n.assignPanelDetails .fa-trash:hover{\\n    color: #7e7e7e !important;\\n    cursor: pointer;\\n}\\n\\n.day {\\n    height: 95px;\\n    width: 121px;\\n    border-left: 2px;\\n    padding: 0px;\\n    background: #fbfbfb;\\n    font-weight: bold;\\n    border-top: 2px solid #fbfbfb;\\n    border-right: 1px solid #F1F1F1;\\n    border-bottom:  1px solid #F1F1F1;\\n    z-index: 997;\\n    text-align: center;\\n    overflow: hidden;\\n}\\n\\n/*.day:hover, .day:active, .day:focus{\\n    border-top: 2px solid #02d1a5;\\n    background: #ffffff;\\n}*/\\n\\n.startOfDay {\\n    float: left;\\n    width: 5px;\\n    height: 100px;\\n    border-left: 1px solid #F1F1F1;\\n    border-top: 1px #E8E8E7 solid;\\n}\\n\\n.startOfMonth {\\n    float: left;\\n    width: 5px;\\n    height: 100px;\\n    border-left: 1px #D9B1BC solid;\\n    border-top: 1px #E8E8E7 solid;\\n}\\n\\n.month {\\n    position: absolute;\\n    z-index: -1;\\n    top: -3px;\\n    font-weight: bold;\\n    color:#989898;\\n    font-size: large;\\n    left: 1em;\\n    overflow: hidden;\\n    white-space: nowrap;\\n}\\n\\n.activityHeaderItem {\\n    font-size: 16px;\\n    float: left;\\n    width: 100%;\\n    height: 100px;\\n    color: #252525;\\n    text-transform: uppercase;\\n    text-align: center;\\n    line-height: 4;\\n    border-bottom: 1px solid #F1F1F1;\\n    overflow: hidden;\\n}\\n.activityHeaderItem.Spare {\\n    background-color: azure;\\n}\\n\\n.activityHeader {\\n    color: #989898;\\n    display: -webkit-box;\\n    display: -ms-flexbox;\\n    display: flex;\\n    -webkit-box-align: center;\\n        -ms-flex-align: center;\\n            align-items: center;\\n    -webkit-box-pack: center;\\n        -ms-flex-pack: center;\\n            justify-content: center;\\n    height: 95px;\\n    overflow: hidden;\\n    background: #fbfbfb;\\n}\\n\\n.daysContainer {\\n    padding-left: 2px;\\n    margin-left: 370px;\\n    border-left: 2px;\\n    overflow:hidden;\\n    overflow-y: hidden;\\n    height: 95px;\\n    /* width: 80%; */\\n}\\n\\n.scrollbarX{\\n    position:absolute;\\n    bottom:0px;\\n    overflow-x: scroll;\\n    overflow-y: hidden;\\n    height: 20px;\\n    width: 85%;\\n    left:210px;\\n}\\n\\n.assignment{\\n    left: 20px;\\n    top: 0px;\\n    position:absolute;\\n    width: auto;\\n    height: 60px;\\n    color: #252525;\\n    background-color: #FBFBFB;\\n    border: 1px solid #080808;\\n    font-weight: bold;\\n    padding: 5px;\\n    margin-top: 0px;\\n    overflow: hidden;\\n    opacity: 0.765;\\n    transition: border 1;\\n}\\n\\n.assignmentSelected {\\n    border-top: 2px solid #080808;\\n    border-left: 2px solid #080808;\\n    opacity: 0.912;\\n}\\n\\n.EditedByPeer {\\n    background-color: #8cfbff;\\n}\\n\\n#AssignPanelHeader {\\n    overflow: hidden;\\n    width: 100%;\\n}\\n\\n#AssignPanelHeader div{\\n\\tmargin-right: 1em;\\n}\\n\\n#AssignPanelHeader div:last-child{\\n\\tmargin-right: 0em;\\n}\\n\\n#AssignPanelTabs {\\n    overflow: hidden;\\n    max-height: 30px;\\n}\\n\\n.currentMonth {\\n    position: absolute;\\n    z-index: 999;\\n    color:#989898;\\n    background-color: #FBFBFB;\\n    padding-left: 2em;\\n    margin-left: -2em;\\n    font-weight: bold;\\n}\\n\\n.colorBadge{\\n    margin-left: 0.5em;\\n    display: inline-block;\\n    border-radius: 50%;\\n    width: 1em;\\n    height: 1em;\\n}\\n\\n#redBall {\\n    visibility: hidden;\\n    border-radius:50px;\\n    width:50px;\\n    height:50px;\\n    background:rgb(141, 154, 162);\\n    position:fixed;\\n    top:0;\\n    left:0;\\n    transition: -webkit-transform 1s;\\n    transition: transform 1s;\\n    transition: transform 1s, -webkit-transform 1s;\\n}\\n\\n.assignmentDetails {\\n    position: relative;\\n    line-height: 50%;\\n    overflow: hidden;\\n}\\n\\n.assignmentDetails > .drivers{\\n    position: absolute;\\n    line-height: 50%;\\n    margin: 0.2 em;\\n}\\n\\n.assignmentNumber {\\n    float: left;\\n    background-color: #ececec;\\n    border-radius: 5px;\\n    font-weight: normal;\\n    font-size: 13px;\\n}\\n\\n.assignment_rowEmployees{\\n\\tfloat: left;\\n\\tfont-size: 13px;\\n    color: rgb(37, 37, 37);\\n}\\n\\n.assignment_rowEmployees li, .assignment_rowEmployees ul{\\n    border-radius: 5px;\\n    padding: 3px;\\n    padding-top: 1px;\\n\\tmargin: 0px;\\n    color: #fbfbfb;\\n}\\n\\n.assignment_rowEmployees > div {\\n    float: left;\\n}\\n\\ncanvas {\\n    -webkit-user-select: none;\\n       -moz-user-select: none;\\n        -ms-user-select: none;\\n            user-select: none;\\n    outline: none;\\n}\\n\\ndiv {\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  outline: none;\\n}\\n\\n.assignPanelDetails .driver {\\n  -webkit-user-select: text;\\n     -moz-user-select: text;\\n      -ms-user-select: text;\\n          user-select: text;\\n}\\n\\n.closeAssignPanel {\\n    float:right;\\n    color: red;\\n    cursor:pointer;\\n    position: absolute;\\n    background-color: white;\\n    right: 0px;\\n    top: 0px;\\n    min-width: 20px;\\n}\\n\\n.day ._meridiem_container {\\n    border-top: 1px solid #dbdbdb;\\n    height: 2px;\\n}\\n\\n.day ._meridiem{\\n    float: left;\\n    width: 50%;\\n    border-right: 1px solid #dbdbdb;\\n    height: 50px;\\n    color: #afafaf;\\n    vertical-align: middle;\\n    padding-top: 12px;\\n}\\n\\n.day ._meridiem:last-child {\\n    border: none;\\n}\\n\\n.scrolledWidget {\\n    position:relative;\\n}\\n\\n.employees {\\n    color: #292b2c;\\n    font-weight: bold;\\n}\\n\\n.employees.noConsultant {\\n    color: red;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/konstantin/svn/rota-client/src/app/admin/schedule3/manage.component.css\n// module id = ../../../../../src/app/admin/schedule3/manage.component.css\n// module chunks = 5","module.exports = \"<div>\\n    <button mat-button (click)=\\\"zoomIn()\\\"><i class=\\\"fa fa-search-plus\\\" aria-hidden=\\\"true\\\"></i></button>\\n    {{_scale_factor_percentage}}%\\n    <button mat-button (click)=\\\"zoomOut()\\\"><i class=\\\"fa fa-search-minus\\\" aria-hidden=\\\"true\\\"></i></button>\\n      <span>\\n        <mat-input-container>\\n          <input matInput  [matDatepicker]=\\\"picker\\\" (ngModelChange)='onChangeScheduleStartDate($event)' [(ngModel)]='_scheduleStartDate' placeholder=\\\"Timeline Start Date\\\">\\n          <mat-datepicker-toggle matSuffix [for]=\\\"picker\\\"></mat-datepicker-toggle>\\n        </mat-input-container>\\n        <mat-datepicker #picker></mat-datepicker>\\n      </span>\\n    <button mat-raised-button color=\\\"primary\\\" (click)=\\\"generateScheduleUI()\\\"><span class=\\\"fa fa-bolt\\\" aria-hidden=\\\"true\\\"></span> Generate Schedule</button>\\n\\n</div>\\n\\n  <div class=\\\"driverTrailerContainer\\\">\\n    <div class=\\\"consultantContainer\\\">\\n      <div class=\\\"driverHeader\\\">Consultants:\\n          <!-- <input matInput placeholder=\\\"search\\\"> -->\\n      </div>\\n\\n      <div class=\\\"driverTrailerBox\\\">\\n        <div id='consultant-{{consultant.id}}' [attr.data-driverid]='consultant.id' class=\\\"employee\\\" draggable=\\\"true\\\"\\n         (dragstart)=\\\"onDragConsultant($event)\\\" style=\\\"position:static;\\\" *ngFor=\\\"let consultant of consultants\\\">\\n            <div class='colorBadge' [style.background-color]='consultant.color'></div> {{consultant.firstName}} {{consultant.lastName}}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"registrarContainer\\\">\\n      <div class=\\\"driverHeader\\\">Registrars:\\n          <!-- <input matInput placeholder=\\\"search\\\"> -->\\n      </div>\\n\\n      <div class=\\\"driverTrailerBox\\\">\\n        <div id='registrar-{{registrar.id}}' [attr.data-driverid]='registrar.id' class=\\\"employee\\\" draggable=\\\"true\\\"\\n         (dragstart)=\\\"onDragRegistrar($event)\\\" style=\\\"position:static;\\\" *ngFor=\\\"let registrar of registrars\\\">\\n            <div class='colorBadge' [style.background-color]='registrar.color'></div> {{registrar.firstName}} {{registrar.lastName}}\\n        </div>\\n      </div>\\n    </div>\\n\\n  </div>\\n\\n  <div #timeHeader class=\\\"daysContainer\\\">\\n      <div class=\\\"currentMonth\\\">{{currentMonth}}</div>\\n    <div #timeHeaderContent>\\n      <div style=\\\"float:left;position:relative;\\\" *ngFor=\\\"let day of days\\\" class=\\\"day\\\">\\n        <span style=\\\"text-align: center;color: #02d1a5;\\\">{{day.date.getDate()}}</span><br />\\n        <span style=\\\"color:#989898;text-transform: uppercase;text-align: center;\\\">{{day.getWeekDay()}}</span>\\n        <div *ngIf=\\\"day.date.getDate()==1\\\" class=\\\"month\\\">{{day.getMonth()}}</div>\\n        <div class=\\\"_meridiem_container\\\">\\n            <div class=\\\"_meridiem\\\">AM</div>\\n            <div class=\\\"_meridiem\\\">PM</div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div #mightyParent class=\\\"mightyParent\\\">\\n    <div class=\\\"regNoContainer\\\">\\n      <div #activityHeader class=\\\"activityHeader\\\">Activities</div>\\n      <div #activityHeaderContainer class=\\\"activityHeaderContainer\\\" style=\\\"overflow: hidden\\\">\\n        <div *ngFor=\\\"let row of activitySchedule\\\" class=\\\"activityHeaderItem\\\" [class.Spare]=\\\"row.activity.name=='Spare'\\\">{{row.activity.name}}</div>\\n        <div style=\\\"clear:both\\\"></div>\\n        <div [style.height.px]=\\\"scrollbarXHeight\\\"> </div>\\n      </div>\\n    </div>\\n\\n    <div #scrollbarX class=\\\"scrollbarX\\\">\\n      <div #scrollbarXDummyContent style=\\\"color: #fff;\\\">.</div>\\n    </div>\\n\\n    <div #scrollbarY class=\\\"scrollbarY\\\">\\n      <div #scrollbarYDummyContent> </div>\\n    </div>\\n\\n    <div #scrolledParent class=\\\"timeTableContainer\\\">\\n        <div [style.display]=\\\"loadingIndication\\\" style=\\\"position:absolute;top:0;right:0;bottom:0;left:0;background-color:white;opacity:0.8;z-index:99999;\\\">\\n\\t\\t\\t<mat-progress-spinner class=\\\"loading-indication\\\" mode=\\\"indeterminate\\\" style=\\\"margin: 0 auto;position: relative; top: 50%;\\\">\\n                Generating Schedule...\\n\\t\\t\\t</mat-progress-spinner>\\n\\t     </div>\\n\\n      <div class=\\\"scrolledWidget\\\" #scrolledWidget style=\\\"float:left\\\" (mousemove)=\\\"onMouseMove($event)\\\" (mouseup)=\\\"onMouseUp($event)\\\">\\n        <div *ngFor=\\\"let row of activitySchedule; let i = index\\\">\\n          <div #timeContainer class=\\\"timeContainer\\\" (drop)=\\\"onDropDriver($event, false)\\\" (dragover)=\\\"onDragOver($event)\\\" [attr.data-activityid]=\\\"row.activity.id\\\" [attr.data-index]=\\\"i\\\">\\n            <div *ngFor=\\\"let assignment of row.assignments\\\"\\n              [attr.data-assignmentid]='assignment.assignmentId' [style.z-index]='assignment.z_index'\\n              [style.left.px]=\\\"assignment.offsetLeft\\\" [style.width.px]=\\\"assignment.width\\\" class=\\\"assignment\\\"\\n              (drop)=\\\"onDropDriver($event, true)\\\" (mousedown)=\\\"onClickAssignment($event)\\\"\\n              [class.EditedByPeer]='assignment.indicatePeerEdit' [id]='\\\"assignment\\\"+assignment.assignmentId'>\\n\\t\\t\\t    <div style=\\\"width: 300px; overflow: hidden;\\\">\\n                  <div class=\\\"assignment_rowEmployees\\\" style=\\\"margin-left: 10px;float: left;\\\">\\n                      <div style=\\\"display: inline-block;top:1em;\\\">\\n\\n                          <div class=\\\"employees\\\" aria-hidden=\\\"true\\\"\\n                              [class.noConsultant]=\\\"!_isThereConsultants(assignment.assignmentEmployees)\\\">\\n                              {{_printConsultantHeader(assignment.assignmentEmployees)}}\\n                          </div>\\n\\n                          <div class=\\\"employees\\\" aria-hidden=\\\"true\\\">\\n                              {{_printRegistrarHeader(assignment.assignmentEmployees)}}\\n                          </div>\\n                          <ul *ngFor=\\\"let assignmentShift of assignment.assignmentEmployees\\\" class=\\\"driver\\\">\\n                              <li *ngIf=\\\"_isEmployeeRegistrar(assignmentShift.employee)\\\" [style.background-color]=\\\"assignmentShift.employee.color\\\">\\n                              {{assignmentShift.employee.firstName}} {{assignmentShift.employee.lastName}}\\n                              </li>\\n                          </ul>\\n                      </div>\\n                      <div>\\n                      </div>\\n                    <br/>\\n                  </div>\\n\\t\\t\\t    </div>\\n            </div>\\n          </div>\\n          <canvas class=\\\"hour\\\" [class.startOfDay]=\\\"hour==0\\\"> </canvas>\\n          <div style=\\\"clear:both\\\"></div>\\n        </div>\\n        <div [style.height.px]=\\\"scrollbarXHeight\\\"> </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div #AssignPanel class=\\\"assingmentPanel\\\" *ngIf=\\\"assignment_selected\\\">\\n    <div #AssignPanelTabs id=\\\"AssignPanelHeader\\\">\\n      <div style=\\\"float:right; color: red; cursor:pointer\\\" (click)=\\\"closeAssignmentPanel()\\\">x</div>\\n      <div style=\\\"clear:both;\\\"></div>\\n    </div>\\n  \\n    <div #AssignPanelDetails class=\\\"assignPanelDetails\\\">\\n  \\n      <div style=\\\"margin-left: 10px;float: left;width: 20%;\\\">\\n          <span aria-hidden=\\\"true\\\"  style=\\\"color: #292b2c;font-weight: bold;\\\">\\n              {{_printConsultantHeaderPanel()}}\\n          </span>\\n        <div *ngFor=\\\"let assignmentEmployee of _getAssignmentConsultants()\\\" class=\\\"consultant\\\" draggable=\\\"true\\\" (dragstart)=\\\"onDragActor($event)\\\"\\n            [attr.data-assignmentemployeeid]='assignmentEmployee.id'>\\n            <div class='colorBadge' [style.background-color]='assignmentEmployee.employee.color'></div>\\n            {{assignmentEmployee.employee.firstName}} {{assignmentEmployee.employee.lastName}}\\n        </div>\\n        <br/>\\n      </div>\\n\\n      <div style=\\\"float: left;width: 20%;\\\">\\n          <span aria-hidden=\\\"true\\\"  style=\\\"color: #292b2c;font-weight: bold;\\\">\\n              {{_printSHOHeaderPanel()}}\\n          </span>\\n        <div *ngFor=\\\"let assignmentEmployee of _getAssignmentSHOs()\\\" class=\\\"registrar\\\" draggable=\\\"true\\\" (dragstart)=\\\"onDragActor($event)\\\"\\n            [attr.data-assignmentemployeeid]='assignmentEmployee.id'>\\n            <div class='colorBadge' [style.background-color]='assignmentEmployee.employee.color'></div>\\n            {{assignmentEmployee.employee.firstName}} {{assignmentEmployee.employee.lastName}}\\n        </div>\\n        <br/>\\n      </div>\\n  \\n      <div style=\\\"float: left;width: 20%;\\\">\\n          <span aria-hidden=\\\"true\\\"  style=\\\"color: #292b2c;font-weight: bold;\\\">\\n              {{_printRegistrarHeaderPanel()}}\\n          </span>\\n        <div *ngFor=\\\"let assignmentEmployee of _getAssignmentRegistrars()\\\" class=\\\"registrar\\\" draggable=\\\"true\\\" (dragstart)=\\\"onDragActor($event)\\\"\\n            [attr.data-assignmentemployeeid]='assignmentEmployee.id'>\\n            <div class='colorBadge' [style.background-color]='assignmentEmployee.employee.color'></div>\\n            {{assignmentEmployee.employee.firstName}} {{assignmentEmployee.employee.lastName}}\\n        </div>\\n        <br/>\\n      </div>\\n  \\n      <div style=\\\"float: left;width: 20%;\\\">\\n          <span aria-hidden=\\\"true\\\"  style=\\\"color: #292b2c;font-weight: bold;\\\">\\n              Others\\n          </span>\\n        <div *ngFor=\\\"let assignmentEmployee of _getAssignmentOthers()\\\" class=\\\"registrar\\\" draggable=\\\"true\\\" (dragstart)=\\\"onDragActor($event)\\\"\\n            [attr.data-assignmentemployeeid]='assignmentEmployee.id'>\\n            <div class='colorBadge' [style.background-color]='assignmentEmployee.employee.color'></div>\\n            {{assignmentEmployee.employee.firstName}} {{assignmentEmployee.employee.lastName}}\\n        </div>\\n        <br/>\\n      </div>\\n\\n      <div style=\\\"clear: both\\\"></div>\\n    </div>\\n  </div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/konstantin/svn/rota-client/src/app/admin/schedule3/manage.component.html\n// module id = ../../../../../src/app/admin/schedule3/manage.component.html\n// module chunks = 5","//\n//   _____      _              _       _\n//  / ____|    | |            | |     | |\n// | (___   ___| |__   ___  __| |_   _| | ___           _ __   __ _  __ _  ___\n//  \\___ \\ / __| '_ \\ / _ \\/ _` | | | | |/ _ \\         | '_ \\ / _` |/ _` |/ _ \\\n//  ____) | (__| | | |  __/ (_| | |_| | |  __/         | |_) | (_| | (_| |  __/\n// |_____/ \\___|_| |_|\\___|\\__,_|\\__,_|_|\\___|         | .__/ \\__,_|\\__, |\\___|\n//                                                     | |           __/ |\n//                                                     |_|          |___/\n//\n// Please enjoy the code in this file. It was written with the full intention of being\n// pleasent to read. Any complains send to tihomir@edatachase.com (me)\n//\n//\n//\n/** importing 3rd party modules */\nimport { NgModule, HostListener, Component,\n    ViewChild, ViewChildren, ElementRef,\n    Renderer, Renderer2, Inject, Injectable} from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { DatePipe } from '@angular/common';\nimport { Router } from '@angular/router';\nimport { DataSource } from '@angular/cdk/table';\nimport { MatPaginator, MatDialog, MatMenuTrigger} from '@angular/material';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\nimport { Observable } from 'rxjs/Rx';\nimport { LocalStorageService } from 'angular-2-local-storage';\nimport { DOCUMENT } from '@angular/common';\nimport { FormControl, FormGroup, FormBuilder, ReactiveFormsModule } from '@angular/forms';\n\n/** importing services */\nimport { ActivityService } from '../../service/activity.service';\n//import { TrailerService } from '../../service/trailer.service';\nimport { CssService } from '../../service/css.service';\nimport { UserService } from '../../service/user.service';\nimport { Schedule3Service } from '../../service/schedule3.service';\n\n/** importing models */\n//import { Vehicle } from '../../model/vehicle';\n//import { Trailer } from '../../model/trailer';\nimport { User, Grade } from '../../model/user';\nimport { TmDate, TmLength } from '../../model/tmdate';\nimport { ActivitySchedule, Assignment, AssignmentShift, AssignmentActivity, AssignmentEmployee } from '../../model/schedule';\n\n/** importing components */\nimport { AdminComponent } from '../admin.component';\nimport { ScheduleComponent3 } from './schedule.component';\n//import { SelectVehicleComponent } from './manage/select-vehicle.component';\nimport { ConfirmDialog } from './manage/confirm-assignment-erase';\n\n/** exporting components */\n//export { SelectVehicleComponent } from './manage/select-vehicle.component';\n//export { ConfirmDialog } from './manage/confirm-assignment-erase';\n\n@Component({\n    templateUrl: './manage.component.html',\n    styleUrls: ['./manage.component.css'],\n})\n\nexport class Manage3Component {\n\n    //@ViewChild(\"scrolledWidget\") public scrolledWidgetRen: Renderer2;\n    @ViewChild(\"scrolledWidget\") public scrolledWidget: ElementRef;\n    @ViewChild(\"scrolledParent\") public scrolledParent: ElementRef;\n    @ViewChild(\"mightyParent\") public mightyParent: ElementRef;\n    @ViewChild(\"scrollbarX\") public scrollbarX: ElementRef;\n    @ViewChild(\"scrollbarXDummyContent\") public scrollbarXDummyContent: ElementRef;\n    @ViewChild(\"scrollbarY\") public scrollbarY: ElementRef;\n    @ViewChild(\"scrollbarYDummyContent\") public scrollbarYDummyContent: ElementRef;\n    @ViewChild(\"timeHeaderContent\") public timeHeaderContent: ElementRef;\n    @ViewChild(\"timeHeader\") public timeHeader: ElementRef;\n    @ViewChild(\"assignmentContextTrigger\") public assignmentContextTrigger: MatMenuTrigger;\n    @ViewChild(\"activityHeader\") public activityHeader: ElementRef;\n    @ViewChild(\"activityHeaderContainer\") public activityHeaderContainer: ElementRef;\n    @ViewChild(\"AssignPanelDetails\") public assignPanelDetails: ElementRef;\n    //@ViewChild(\"activityHeaderContainerViewPort\") public activityHeaderContainerViewPort: ElementRef;\n\n    public selectedActivitiesSimple : any = {total: 0, users: []};\n    public activitySchedule: ActivitySchedule[] = [];\n    //private _driver_schedule: Array<DriverSchedule[]> = [];\n\n    public hours: number[] = [];\n\n    public _width: any;\n    public _height: any;\n\n    // TODO manage through local storage\n    public _scale_factor: number = 1;\n    public _scale_factor_percentage: number = 100;\n    public _hour_width: number = 5; //in pixels\n    public _hour_height: number = 60; //in pixels\n\n    public _cell_width: number = 180; //in pixels\n    public _cell_height: number = 60; //in pixels\n\n    public days: TmDate[] = [];\n\n    /** Mouse pointer offset from the left side of the Drag-and-Drop source element. */\n    private _dnd_t_offset_x = 0;\n    /** Mouse pointer offset from the top side of the Drag-and-Drop source element. */\n    private _dnd_t_offset_y = 0;\n    /** The element that is being currently dragged. Null when Drag-and-Drop is not being performed */\n    private _dnd_element:any = null;\n    private _resize_target:any = null;\n    private _driver_time_from:number = 0;\n    private _driver_time_to:number = 0;\n    private _resize_side: string = '';\n    private consultants: User[] = [];\n    private registrars: User[] = [];\n    //private trailers: Trailer[] = [];\n    /**  */\n    private assignments_overlapped: Assignment[] = [];\n    private assignment_selected: Assignment|null = null;\n    //private onClickAssignment_ignore: boolean;\n\n    private reached_z_index: number = 0;\n\n    private scrollbarYWidth = 20;\n    private scrollbarXHeight = 20;\n    private periodFormFields: any;\n    private _periodForm_from = '';\n    private _periodForm_to = '';\n    private _scheduleStartDate: any = '';\n    private currentMonth: string = '';\n    private _vehicle_header_font_dize = 16;\n    private _date_header_padding = 25;\n    private _assignment_border_radius = 15;\n    private scheduleIndex = -1;\n    private reservedOffsetLeft = 0; //with this we compensate over unalighed assignments\n\tpublic loadingIndication = 'none';\n\n    constructor (\n        private router: Router,\n        private parentComponent: AdminComponent,\n        private userService: UserService,\n        private activityService: ActivityService,\n        //private trailerService: TrailerService,\n        private scheduleComponent: ScheduleComponent3,\n        private localStorageService: LocalStorageService,\n        private renderer: Renderer,\n        private renderer2: Renderer2,\n        public dialog: MatDialog,\n        @Inject(DOCUMENT) private document: any,\n        private cssService: CssService,\n        private schedule3Service: Schedule3Service,\n        private formBuilder: FormBuilder) {\n\n        this.periodFormFields = this.formBuilder.group({dateFrom: '', dateTo: ''});\n    }\n\n    //private loadVehicles() {\n    //  for(let i in this.selectedVehiclesSimple.vehicles) {\n    //      if(this.selectedVehiclesSimple.vehicles[i] != null && this.selectedVehiclesSimple.vehicles[i] == true) {\n    //        this.vehicleService.getVehicle(+i).then(vehicle => {\n    //            this.registrarSchedule.push({vehicle: vehicle, assignments: []});\n    //        })\n    //      }\n    //  }\n    //  console.log(this.registrarSchedule);\n    //}\n\n    ngDoCheck() {\n        let total = 0;\n        for(let i in this.selectedActivitiesSimple.users) {\n            if(this.selectedActivitiesSimple.users[i] != null && this.selectedActivitiesSimple.users[i] == true) {\n                total++;\n            }\n        }\n\n        if(this.selectedActivitiesSimple.total != total ) {\n            //if(true) {\n            this.selectedActivitiesSimple.total = total;\n            for(let i in this.selectedActivitiesSimple.users) {\n                if(this.selectedActivitiesSimple.users[i] == true &&\n                    !this.isVehiclePresent(+i)) {\n                    //                    this.vehicleService.getVehicle(+i).then(vehicle => {\n                    //                        this.activitySchedule.unshift({vehicle:vehicle, assignments: []});\n                    //\n                    //                        let vehicleId: string[] = [];                 // we need to prepare an array containing vehicleId\n                    //                        vehicleId[this.activitySchedule.length-1] = i; // in a format suitable for the loadAssignments()\n                    //                        // method. I'm sure it seems rather obfscured, sorry.\n                    //                        // vehicleId index is the index at which the vehicle\n                    //                        // appear in the activitySchedule array, that's why\n                    //                        // we use latter's last index (we just pushed in it);\n                    //                        // i is the vehicleId\n                    //\n                    //                        let timeLength = new TmLength();                // time length is calculated by multiplying the hours\n                    //                        timeLength.seconds = this.hours.length * 3600;  // we got for the timeline by number of seconds\n                    //                        this.loadAssignments(this.days[0], timeLength, vehicleId);\n                    //\n                    //                    })\n                }\n            }\n\n            let toBeRemoved: number[] = [];\n            //let len = this.activitySchedule.length;\n            //            for(let i=0; i<len; i++) {\n            //                if(this.isVehicleRemoved(this.activitySchedule[i].vehicle.id)) {\n            //                    toBeRemoved.push(i);\n            //                    //delete(this.selectedUsersSimple[vehi.id]);\n            //                }\n            //            }\n            //\n            //            for(let i of toBeRemoved) {\n            //                this.removeKnownReferences(i);\n            //                this.activitySchedule.splice(i,1);\n            //            }\n        }\n    }\n\n    /** Removes known references to assignments. Used when unloading vehicle schedules\n     *  @param index activitySchedule index\n     */\n    public removeKnownReferences(index: number) {\n        if(this.assignment_selected == null) {\n            return;\n        }\n        // 1. Remove reference to assignment_selected if it was the one selected\n        //        for(let ass of this.activitySchedule[index].assignments){\n        //            if(ass.assignmentId == this.assignment_selected.assignmentId) {\n        //                this.assignment_selected = null;\n        //                break;\n        //            }\n        //        }\n    }\n\n    isVehicleRemoved(id: number) {\n        if(this.selectedActivitiesSimple.users[id] == null || this.selectedActivitiesSimple.users[id] == false) {\n            return true;\n        }\n        return false;\n    }\n\n    isVehiclePresent(id: number) {\n        //        for(let vehi of this.activitySchedule) {\n        //            if(vehi.vehicle.id == id) {\n        //                return true;\n        //            }\n        //        }\n        //        return false;\n    }\n\n    private moveRedBall(ev: MouseEvent) {\n        let f = document.getElementById('redBall');\n        f.style.visibility = 'visible';\n        f.style.transform = 'translateY('+(ev.clientY-25)+'px)';\n        f.style.transform += 'translateX('+(ev.clientX-25)+'px)';\n\n    }\n\n    private centralizeActiveTab() {\n        let tab = document.getElementById('redBall');\n        let tabContainer = document.getElementById('redBall');\n\n        let scrollTo = this.elementCoords(tab);\n        tabContainer.scrollLeft = scrollTo.x - this.mightyParent.nativeElement.clientWidth;\n\n        //        f.style.visibility = 'visible';\n        //        f.style.transform = 'translateY('+(ev.clientY-25)+'px)';\n        //        f.style.transform += 'translateX('+(ev.clientX-25)+'px)';\n\n    }\n\n    private installCallbacks() {\n        if(this.scrollbarX != null) {\n            this.renderer2.listen(this.scrollbarX.nativeElement, \"scroll\", this.scrollCallbackX);\n        }\n        if(this.scrollbarY != null) {\n            this.renderer2.listen(this.scrollbarY.nativeElement, \"scroll\", this.scrollCallbackY);\n        }\n        if(this.mightyParent != null) {\n            this.renderer2.listen(this.mightyParent.nativeElement, \"mousewheel\", this.mousewheelCallback);\n        }\n    }\n\n    ngOnInit() {\n        this.restoreProperties();\n\n        this.scheduleComponent.pushHistory(-1);\n        // set up event handlers\n        this.renderer2.listen(this.scrollbarX.nativeElement, \"scroll\", this.scrollCallbackX);\n        this.renderer2.listen(this.scrollbarY.nativeElement, \"scroll\", this.scrollCallbackY);\n        this.renderer2.listen(this.mightyParent.nativeElement, \"mousewheel\", this.mousewheelCallback);\n        this.renderer2.listen('window', 'resize', this.resizeCallback);\n\n        let f = document.getElementById('foo');\n        //this.renderer2.listen(document, 'dblclick', this.moveRedBall);\n\n\n\n        //TODO Come up with a mechanism for paginating users\n        this.userService._getUsers(0, 1000, ['Consultant']).then(users => {\n            this.consultants.length = 0;\n            this.consultants.splice(0,0,...users);\n        });\n\n        let registrarGrades = [];\n        for(let g in Grade) {\n            if(g != 'Consultant') {\n                registrarGrades.push(g);\n            }\n        }\n\n        this.userService._getUsers(0, 1000, registrarGrades).then(users => {\n            this.registrars.length = 0;\n            this.registrars.splice(0,0,...users);\n        });\n\n        this.schedule3Service.addPeerSaveCallback((assignment: any) => {\n            assignment.assignmentId = assignment.id;\n\n            assignment.startTime = new TmDate();\n            assignment.startTime.date.setTime(assignment.dateFrom-(assignment.startTime.date.getTimezoneOffset()*60000));\n            assignment.timeLength = new TmLength();\n            assignment.timeLength.seconds = (assignment.dateTo - assignment.dateFrom) / 1000;\n            assignment.offsetLeft = this.reservedOffsetLeft + Math.floor(((assignment.startTime.date.getTime()/3600000) - this.days[0].date.getTime()/3600000)) * (this._hour_width * this._scale_factor);\n            //ass.offsetLeft = 40;\n            assignment.width = ((assignment.timeLength.seconds) / 3600) * (this._hour_width * this._scale_factor);\n            assignment = this.pushAssignmentLocally(assignment);\n        });\n\n        this.schedule3Service.addPeerDeleteCallback((assignmentId: number) => {\n            this.deleteAssignmentLocally(assignmentId);\n        });\n\n    }\n\n    ngAfterViewInit() {\n        let date = new TmDate();\n        if(this._scheduleStartDate !== ''){\n            date.setFromDate(this._scheduleStartDate+' UTC');\n        }\n        //        this._scheduleStartDate = date.getShortDateWithYear();\n        this.initView(date);\n    }\n\n    public peerSaveCallback(assignment: any) {\n        //            assignment.assignmentId = assignment.id;\n        //\n        //            assignment.startTime = new TmDate();\n        //            assignment.startTime.date.setTime(assignment.dateFrom-(assignment.startTime.date.getTimezoneOffset()*60000));\n        //            assignment.timeLength = new TmLength();\n        //            assignment.timeLength.seconds = (assignment.dateTo - assignment.dateFrom) / 1000;\n        //            assignment.offsetLeft = Math.floor(((assignment.startTime.date.getTime()/3600000) - this.days[0].date.getTime()/3600000)+1) * (this._hour_width * this._scale_factor);\n        //            //ass.offsetLeft = 40;\n        //            assignment.width = ((assignment.timeLength.seconds) / 3600) * (this._hour_width * this._scale_factor);\n        //            assignment.indicatePeerEdit = true;\n        //            console.log(\"inidicatePeerEdit\");\n        //            setTimeout(() => assignment.indicatePeerEdit = false, 2000);\n        //            this.pushAssignmentLocally(assignment);\n    }\n\n    public loadAssignments(startDate: TmDate, timeLength: TmLength, vehicleIds:string[]) {\n        this.loadingIndication = 'block';\n        this.schedule3Service.fetchAssignments(startDate, timeLength, vehicleIds, (assignments: any[]) => {\n            let vehicleIdMap = this.array_flip(vehicleIds);\n            for(let ass of assignments){\n                ass.assignmentId = ass.id;\n\n                ass.startTime = new TmDate();\n                ass.startTime.date.setTime(ass.dateFrom);//-(ass.startTime.date.getTimezoneOffset()*60000));\n                ass.timeLength = new TmLength();\n                ass.timeLength.seconds = (ass.dateTo - ass.dateFrom) / 1000;\n                ass.width = (this._hour_width * this._scale_factor * 12);\n                ass.offsetLeft = this.reservedOffsetLeft + Math.floor(((ass.startTime.date.getTime()/3600000) - this.days[0].date.getTime()/3600000)) * (this._hour_width * this._scale_factor);\n                if(ass.shift == 'PM') {\n                    ass.offsetLeft += ass.width;\n                }\n                //ass.offsetLeft = 40;\n                this.pushAssignmentLocally(ass);\n                //this.registrarSchedule[vehicleIdMap[ass.assignmentActivities[0].vehicle.id]].assignments.push(ass);\n                console.log(ass);\n            }\n\n            if(this.assignment_selected != null) {\n                this.bubbleSort(this.activitySchedule[vehicleIdMap[this.assignment_selected.assignmentActivities[0].activity.id]].assignments, 'offsetLeft');\n            }\n\n            this.applyCustomScrollbars();\n            setTimeout(() => this.resizeAssignPanelTabs(), 0);\n            this.loadingIndication = 'none';\n        });\n    }\n\n    public computeWidth(shift: string) {\n        let width = this._hour_width * this._scale_factor;\n        switch (shift) {\n            case 'AM':\n            case 'PM':\n                width *= 12;\n                break;\n            case 'D':\n                width *= 24;\n                break;\n        }\n\n        return width;\n    }\n\n    public array_flip(array: any[])\n    {\n        var key, tmp_ar = {};\n        for ( key in array )\n        {\n            if ( array.hasOwnProperty( key ) )\n            {\n                tmp_ar[array[key]] = key;\n            }\n        }\n        return tmp_ar;\n    }\n\n    public getVehicleIdMapping(vehicleIds: string[]){\n        let map: string[] = [];\n        let c = 0;\n        for(let v in vehicleIds) {\n            map[c] = v;\n            c++;\n        }\n\n        return map;\n    }\n\n    private initView(date: TmDate) {\n        this._scheduleStartDate = date.get_ISO_8601_Date();\n        this.currentMonth = date.getMonth()+\" \"+date.date.getFullYear();\n\n        let hoursPerScreen = this.scrolledParent.nativeElement.clientWidth /\n            (this._hour_width * this._scale_factor);\n        let daysPerScreen = hoursPerScreen / 24;\n        this.hours.length = Math.ceil(hoursPerScreen) * 2;\n        this.days.length = 0;\n        let day;\n        for(let i=0; i<this.hours.length; i++){\n            this.hours[i] = i % 24;\n            if(this.hours[i] == 0){\n                day = date.fork();\n                this.days.push(day);\n                date.alterDate(+1);\n            }\n        }\n\n        let vehicleIds: string[] = [];\n        //        for(let id in this.selectedVehiclesSimple.vehicles) {\n        //            if(this.selectedVehiclesSimple.vehicles[id] == true) {\n        //                vehicleIds.push(id);\n        //            }\n        //        }\n\n        let timeLength = new TmLength();\n        timeLength.seconds = this.hours.length * 3600;\n\n        setTimeout(()=> this.loadAssignments(this.days[0], timeLength, vehicleIds), 2000);\n        this._scaleView();\n        //        this.scrollbarX.nativeElement.scrollLeft = 300;\n        //        this.scrolledParent.nativeElement.scrollLeft = this.scrollbarX.nativeElement.scrollLeft;\n        //        this.timeHeader.nativeElement.scrollLeft = this.scrollbarX.nativeElement.scrollLeft;\n    }\n\n    public zoomIn() {\n        if(this._scale_factor > 1.74) {\n            return\n        }\n        this._scale_factor += 0.15;\n        console.log(this._scale_factor);\n        this._scale_factor_percentage = Math.ceil(this._scale_factor * 100);\n        this._scaleView();\n    }\n\n    public zoomOut() {\n        if(this._scale_factor < 0.551) {\n            return\n        }\n        this._scale_factor -= 0.15;\n        console.log(this._scale_factor);\n        this._scale_factor_percentage = Math.ceil(this._scale_factor * 100);\n        this._scaleView();\n        //TODO check to see whether to allocate more time in the timeline (and load additioanl assignments)\n    }\n\n    private updateTimelineWidth() {\n        let width = (this.hours.length * (this._hour_width * this._scale_factor));\n        //width -= 80;\n        this.scrolledWidget.nativeElement.style.width = width.toString()+\"px\";\n        let timeContainers = document.querySelectorAll('.timeContainer');\n        for(let i=0; timeContainers[i]; i++) {\n            (timeContainers[i] as HTMLElement).style.width = width.toString()+\"px\";\n        }\n\n        let hoursCanvasses = document.querySelectorAll('.hour');\n        for(let i=0; hoursCanvasses[i]; i++){\n            let canvas = (hoursCanvasses[i] as any);\n            canvas.setAttribute(\"width\", width);\n            canvas.setAttribute(\"height\", this._hour_height);\n            canvas.style.width = this.scrolledWidget.nativeElement.style.width;\n            let context = canvas.getContext(\"2d\");\n            let step = this._hour_width * this._scale_factor;\n\n            context.clearRect(0, 0, width, this._hour_height);\n            for(let x=0, i=0; x < width; x+=step, i++) {\n                if(i % 24 == 0 && i != 0) {\n                    context.fillStyle = '#EFEFEF';\n                    context.fillRect(x, 0, 2, this._hour_height);\n                }\n                else if (i % 12 == 0 && i != 0) {\n                    context.fillStyle = '#F1F1F1';\n                    context.fillRect(x, 0, 2, this._hour_height);\n                }\n                else {\n                    context.fillStyle = '#FBFBFB';\n                    context.fillRect(x, 0, 1, this._hour_height);\n                }\n            }\n        }\n\n        this.scrollbarXDummyContent.nativeElement.style.width = width.toString()+\"px\";\n        this.timeHeaderContent.nativeElement.style.width = (width+100).toString()+\"px\";\n    }\n\n    public _scaleView() {\n        let styles = this.cssService.getStyle(\"^\\\\.hour.*\");\n        //let hour_width = parseInt(styles[0].style.getPropertyValue(\"width\"));\n        styles.forEach(rule => {\n            rule.style.setProperty(\"width\", (this._hour_width*this._scale_factor)+\"px\");\n            rule.style.setProperty(\"height\", (this._hour_height*this._scale_factor)+\"px\");\n        });\n\n        styles = this.cssService.getStyle(\"^\\\\.assignment\\\\[[^\\\\]]*\\\\]$\");\n        //let hour_width = parseInt(styles[0].style.getPropertyValue(\"width\"));\n        styles.forEach(rule => {\n            rule.style.setProperty(\"height\", (this._hour_height*this._scale_factor)+\"px\");\n        });\n        //styles[0].style.setProperty(\"border-radius\", (this._assignment_border_radius*this._scale_factor)+\"px\");\n\n        this.updateTimelineWidth();\n        styles = this.cssService.getStyle(\"^\\\\.activityHeaderItem.*\");\n        //let hour_width = parseInt(styles[0].style.getPropertyValue(\"width\"));\n        //styles[0].style.setProperty(\"width\", (this._cell_width*this._scale_factor)+\"px\");\n        styles.forEach(rule => {\n            rule.style.setProperty(\"height\", (this._cell_height*this._scale_factor)+\"px\");\n        });\n\n        if(this._scale_factor < 1){\n            styles.forEach(rule => {\n                rule.style.setProperty('font-size', (this._vehicle_header_font_dize*this._scale_factor)+\"px\");\n            });\n        }\n        //this.scaleCssProperty(styles[0].style, 'font-size', this._vehicle_header_font_dize, this._scale_factor);\n\n\n        styles = this.cssService.getStyle(\"^\\\\.day\\\\[[^\\\\]]*\\\\]$\");\n        //let hour_width = parseInt(styles[0].style.getPropertyValue(\"width\"));\n        //styles[0].style.setProperty(\"width\", (this._cell_width*this._scale_factor)+\"px\");\n        styles.forEach(rule => {\n            rule.style.setProperty(\"width\", (this._hour_width*24*this._scale_factor)+\"px\");\n            rule.style.setProperty(\"max-width\", (this._hour_width*24*this._scale_factor)+\"px\");\n            if(this._scale_factor < 1){\n                rule.style.setProperty(\"padding\", (this._date_header_padding*this._scale_factor)+\"px\");\n                rule.style.setProperty(\"padding-top\", this._date_header_padding+\"px\");\n                rule.style.setProperty(\"font-size\", (this._vehicle_header_font_dize*this._scale_factor)+\"px\");\n            }\n        });\n\n        styles = this.cssService.getStyle(\"^\\\\.startOfDay.*\");\n        //let hour_width = parseInt(styles[0].style.getPropertyValue(\"width\"));\n        styles.forEach(rule => {\n            rule.style.setProperty(\"width\", (this._hour_width*this._scale_factor)+\"px\");\n            rule.style.setProperty(\"height\", (this._hour_height*this._scale_factor)+\"px\");\n\n        });\n\n        styles = this.cssService.getStyle(\"^\\\\.timeContainer.*\");\n        styles.forEach(rule => {\n            //let hour_width = parseInt(rule.style.getPropertyValue(\"width\"));\n            rule.style.setProperty(\"width\", this.scrolledWidget.nativeElement.style.width);\n            rule.style.setProperty(\"height\", (this._hour_height*this._scale_factor)+\"px\");\n        });\n\n        this.applyCustomScrollbars();\n        this.applyMainWidgetsSizes();\n\n        this._scaleAssignments();\n    }\n\n    private scaleCssProperty(style: any, property: string, scaleFactor: number) {\n        let value = style.getPropertyValue(property);\n        value = (value && value.length > 0) ? parseInt(value) : 0;\n        let regex = new RegExp('([^0-9].*)');\n        let match = regex.exec(value);\n        let suffix = match ? match[1] : 'px';\n        style.setProperty(property, (value*scaleFactor)+suffix);\n    }\n\n    public applyCustomScrollbars() {\n        // Positioning some things programatically. This is needed because we have elements\n        // with no \"analog connection\" between them\n        this.scrollbarX.nativeElement.style.left = this.activityHeader.nativeElement.clientWidth;\n        let scrollbarXWidth =\n            (this.mightyParent.nativeElement.clientWidth - this.activityHeader.nativeElement.clientWidth-120)-this.scrollbarYWidth;\n        this.scrollbarX.nativeElement.style.width = scrollbarXWidth+\"px\";\n\n        this.scrollbarY.nativeElement.style.height =\n            (this.mightyParent.nativeElement.clientHeight - this.activityHeader.nativeElement.clientHeight)+\"px\";\n        this.scrollbarYDummyContent.nativeElement.style.height = (this.scrolledWidget.nativeElement.clientHeight)+\"px\";\n\n        this.scrolledParent.nativeElement.style.height = this.scrollbarY.nativeElement.style.height;\n        //this.activityHeaderContainerViewPort.nativeElement.style.height = this.scrollbarY.nativeElement.style.height;\n        this.activityHeaderContainer.nativeElement.style.height = this.scrollbarY.nativeElement.style.height;\n    }\n\n    public applyMainWidgetsSizes() {\n        let vpHeight = window.innerHeight;\n        let timelineBox = this.elementCoords(this.mightyParent.nativeElement);\n\n        let createdBy = document.querySelectorAll('.createdBy');\n        let createdByBox = this.elementCoords(createdBy[0]);\n        let preHeight = (vpHeight - timelineBox.y) - createdByBox.height; //precalculated height.\n        preHeight -= 60;\n\n        if(this.assignment_selected) {\n            preHeight -=200;\n        }\n\n        if(vpHeight > 932) {\n            preHeight -= 80;\n        }\n\n        this.mightyParent.nativeElement.style.height = Math.floor(preHeight) + \"px\";\n\n        //preHeight -= 100;\n        let consultantContainerHeight = ((preHeight-50) / 2);\n        let driverTrailerContainers = document.querySelectorAll('.driverTrailerContainer') as any;\n        driverTrailerContainers[0].style.height = Math.floor(preHeight) + \"px\";\n\n        let consultantContainer = document.querySelectorAll('.consultantContainer') as any;\n        consultantContainer[0].style.height = Math.floor(consultantContainerHeight) + \"px\";\n\n        let trailerContainer = document.querySelectorAll('.registrarContainer') as any;\n        trailerContainer[0].style.height = Math.floor(consultantContainerHeight+40) + \"px\";\n\n        let driverTrailerBox = document.querySelectorAll('.driverTrailerBox') as any;\n        for(let box of driverTrailerBox) {\n            box.style.height = Math.floor(consultantContainerHeight-30) + \"px\";\n        }\n\n        this.resizeAssignPanelTabs();\n    }\n\n    public resizeAssignPanelTabs() {\n        let assignPanelHeader = document.querySelector(\"#AssignPanelHeader\") as any;\n        if(assignPanelHeader != null) {\n            //assignPanelHeader.style.width = (this.mightyParent.nativeElement.clientWidth) + \"px\";\n        }\n\n        let assignPanelTabs = document.querySelector(\"#AssignPanelTabs\") as any;\n        if(assignPanelTabs != null) {\n            let actualTabs = document.querySelectorAll(\"#AssignPanelTabs > div\") as any;\n            let totalWidth = 0;\n            for(let tab of actualTabs) {\n                totalWidth += tab.offsetWidth + 16;\n            }\n            assignPanelTabs.style.width = totalWidth + \"px\";\n        }\n    }\n\n    private assignPanelTabsMouseWheelCallback(event: MouseWheelEvent) {\n        let assignPanelTabs = document.querySelector(\"#AssignPanelTabs\");\n        if(assignPanelTabs != null) {\n            assignPanelTabs.scrollLeft += event.deltaY;\n        }\n        //console.log(event.deltaY);\n    }\n\n    public _scaleAssignments() {\n        for(let schedule of this.activitySchedule){\n            for(let assignment of schedule.assignments){\n                assignment.width = (this._hour_width * this._scale_factor * 12);\n                assignment.offsetLeft = this.reservedOffsetLeft + Math.floor(((assignment.startTime.date.getTime()/3600000) - this.days[0].date.getTime()/3600000)) * (this._hour_width * this._scale_factor);\n                if(assignment.shift == 'PM') {\n                    assignment.offsetLeft += assignment.width;\n                }\n            }\n        }\n    }\n\n    private resizeCallback = (event: Event) => {\n        // TODO Reevalute scroll callback (or at least that part which is responsible for\n        // *redrawing* time *cells*)\n        //this.applyCustomScrollbars();\n        setTimeout(() => {\n            this.applyMainWidgetsSizes();\n            setTimeout(()=>this._scaleView(), 0);\n        }, 0);\n\n        console.log(\"__width: \"+this.scrolledParent.nativeElement.clientWidth);\n    }\n\n    /** Handles mouse wheel events. If Control key is pressed zooming is performed, otherwise scrolling the timeline.\n     *  If no key is pressed scrolls vertically, if the Shift key is pressed scroll horizontally\n     */\n    private mousewheelCallback = (event: MouseWheelEvent) => {\n        if(this.loadingIndication == 'block') {\n            event.stopPropagation();\n            return false;\n        }\n        if(event.ctrlKey == true) {\n            if(event.deltaY > 0) {\n                this.zoomOut();\n            }\n            else {\n                this.zoomIn();\n            }\n            //console.log(event.deltaY);\n        }\n        else {\n            if(event.deltaMode == event.DOM_DELTA_PIXEL) {\n                if(event.shiftKey == true){\n                    this.scrollbarX.nativeElement.scrollLeft += event.deltaY;\n                    //console.log('scrollLeft: '+this.scrollbarX.nativeElement.scrollLeft);\n                    //this.document.get().scrollTop += event.deltaY;\n                    event.preventDefault();\n                    event.stopPropagation();\n                    event.stopImmediatePropagation();\n                }\n                else {\n                    this.scrollbarY.nativeElement.scrollTop += event.deltaY;\n                    event.preventDefault();\n                    event.stopPropagation();\n                    event.stopImmediatePropagation();\n                }\n            }\n        }\n\n        //   else if (event.deltaMode == event.DOM_DELTA_PAGE) {\n        //       // TODO scroll by whole page. That is, whole width at a time\n        //   }\n        //   else if (event.deltaMode == event.DOM_DELTA_LINE) {\n        //       // TODO scroll by an hour\n        //   }\n        //console.log(\"mousewheel; \"+event.deltaY);\n        return false;\n    }\n\n    private scrollCallbackY = (event: Event) => {\n        this.scrolledParent.nativeElement.scrollTop = this.scrollbarY.nativeElement.scrollTop;\n        this.activityHeaderContainer.nativeElement.scrollTop = this.scrollbarY.nativeElement.scrollTop;\n        console.log(\"scrolledParent Y: \"+this.scrolledParent.nativeElement.scrollTop);\n        console.log(\"activityHeaderContainerY: \"+this.activityHeaderContainer.nativeElement.scrollTop);\n    }\n\n    private scrollCallbackX = (event: Event) => {\n\n        if((this.scrollbarX.nativeElement.scrollLeft+10) >\n            (this.scrolledWidget.nativeElement.clientWidth-this.scrolledParent.nativeElement.clientWidth)) {\n\n            let hoursPerScreen = this.scrolledParent.nativeElement.clientWidth /\n                (this._hour_width * this._scale_factor);\n            let daysPerScreen = hoursPerScreen / 24;\n            let hoursToAdd = hoursPerScreen;\n            //this.hours.length = Math.ceil(hoursPerScreen) * 2;\n            let date = new TmDate();\n            date.setFromTmDate(this.days[this.days.length-1]);\n            //date.alterDate(+1);\n\n            let timeLength = new TmLength();\n            timeLength.seconds = hoursToAdd * 3600;\n\n            let activityIds: string[] = [];                // we need to prepare an array containing vehicleIds\n            for(let v of this.activitySchedule) {          // in a format suitable for the loadAssignments()\n                activityIds.push(v.activity.id.toString()); // method\n            }                                             // .....\n\n            this.loadAssignments(this.days[this.days.length-1], timeLength, activityIds);\n\n            let day;\n            for(let i=this.hours[this.hours.length-1]+1; i<hoursToAdd; i++){\n                this.hours.push(i % 24);\n                if(i % 24 == 0){\n                    date.alterDate(+1);\n                    day = date.fork();\n                    this.days.push(day);\n                }\n            }\n            this.updateTimelineWidth();\n        }\n\n        this.scrolledParent.nativeElement.scrollLeft = this.scrollbarX.nativeElement.scrollLeft;\n        this.timeHeader.nativeElement.scrollLeft = this.scrollbarX.nativeElement.scrollLeft;\n\n        this.reevaluateCurrentMonth();\n    }\n\n    private reevaluateCurrentMonth() {\n        let scrollLeft = this.scrolledParent.nativeElement.scrollLeft;\n        let daysOffset = Math.floor(scrollLeft / ((this._hour_width*this._scale_factor) * 24));\n        this.currentMonth = this.days[daysOffset].getMonth()+\" \"+this.days[daysOffset].date.getFullYear();\n    }\n\n    private ngOnDestroy() {\n        this.storeProperties();\n    }\n\n    private storeProperties() {\n        //this.localStorageService.set(this.constructor.name+'.selectedVehiclesSimple', this.selectedVehiclesSimple);\n\n        //        let selectedVehiclesOrdered: any[] = [];\n        //        for(let schdl of this.registrarSchedule) {\n        //            selectedVehiclesOrdered.push(schdl.vehicle);\n        //        }\n        //        this.localStorageService.set(this.constructor.name+'.selectedVehiclesOrdered', selectedVehiclesOrdered);\n        //   this.localStorageService.set(this.constructor.name+'.pageSize', this.paginator.pageSize);\n        if(typeof(this._scheduleStartDate) != 'string') {\n            //var regexp = new RegExp('(\\\\d\\\\d).(\\\\d\\\\d).(\\\\d\\\\d\\\\d\\\\d)');\n            //var match = regexp.exec(this._scheduleStartDate);\n            //let date.setUTCDate(+match[1]);\n            //let date.setUTCMonth(+match[2]);\n            //let date.setUTCFullYear(+match[3]);\n            //let\n            let year = this._scheduleStartDate.getFullYear();\n            let date = this._scheduleStartDate.getDate();\n            let month: any = this._scheduleStartDate.getMonth()+1;\n            if (month < 10) {\n                month = \"0\"+month;\n            }\n            this._scheduleStartDate = year+\"/\"+month+\"/\"+date;\n        }\n        this.localStorageService.set(this.constructor.name+'._scheduleStartDate', this._scheduleStartDate);\n\n        this.localStorageService.set(this.constructor.name+'._scale_factor', this._scale_factor);\n        this.localStorageService.set(this.constructor.name+'._scale_factor_percentage', this._scale_factor_percentage);\n    }\n\n    private selectAllVehicles() {\n        this.activityService._getAllActivitys(0, 1000000).then((result: any) => {\n            let specialActivities = [];\n            let counter = 0;\n            let ids: any[] = [];\n            this.selectedActivitiesSimple = {total:0, vehicles: []};\n            for(let activity of result) {\n                ids.push(activity.id);\n                //for(let vehicle of result.vehicleList) {\n                if(activity.name == 'Late' || activity.name == 'Night') {\n                    specialActivities.push(activity);\n                }\n                else {\n                    this.activitySchedule.push({activity: activity, assignments: []});\n                }\n\n                this.selectedActivitiesSimple.vehicles[activity.id] = true;\n                counter++;\n            }\n\n            for(let sa of specialActivities) {\n                this.activitySchedule.unshift({activity: sa, assignments: []});\n            }\n\n            this.selectedActivitiesSimple.total = counter;\n            //window.location.reload(false); //quick and dirty: reload the page in order to initialize it correctly\n            //this.loadAssignments(ids);\n            setTimeout(()=>this.updateTimelineWidth(), 0);\n        });\n    }\n\n    private restoreProperties() {\n        this.selectAllVehicles();\n        //        let selectedVehiclesSimple = <any>this.localStorageService.get(this.constructor.name+'.selectedVehiclesSimple');\n        //        if(selectedVehiclesSimple != null) {\n        //            //this.selectedVehiclesSimple.vehicles.length = 0;\n        //            this.selectedVehiclesSimple = selectedVehiclesSimple;\n        //        }\n        //        else {\n        //        }\n\n        //        let selectedVehiclesOrdered = <any>this.localStorageService.get(this.constructor.name+'.selectedVehiclesOrdered');\n        //        if (selectedVehiclesOrdered != null) {\n        //            this.registrarSchedule.length = 0;\n        //            for(let vehicle of selectedVehiclesOrdered) {\n        //                this.registrarSchedule.push({vehicle: vehicle, assignments: []});\n        //            }\n        //        }\n        //   let pageSize = <number>this.localStorageService.get(this.constructor.name+'.pageSize');\n        //   if(pageSize != null) {\n        //         this.paginator.pageSize = pageSize;\n        //   }\n        let _scheduleStartDate = this.localStorageService.get(this.constructor.name+'._scheduleStartDate');\n        if(_scheduleStartDate != null && Date.parse((_scheduleStartDate as string))) {\n            this._scheduleStartDate = _scheduleStartDate;\n        }\n\n        let _scale_factor = this.localStorageService.get(this.constructor.name+'._scale_factor') as number;\n        if(_scale_factor!= null) {\n            this._scale_factor = _scale_factor;\n        }\n\n        let _scale_factor_percentage = this.localStorageService.get(this.constructor.name+'._scale_factor_percentage') as number;\n        if(_scale_factor_percentage!= null) {\n            this._scale_factor_percentage = _scale_factor_percentage;\n        }\n    }\n\n    // ngOnDestroy will be only called if the user navigates to a different route. If she just closes\n    // the document destructor will not be called. Here we cover closing document.\n    @HostListener('window:beforeunload', [ '$event' ])\n    beforeUnloadHander(event: any) {\n        this.ngOnDestroy();\n    }\n\n    @HostListener('mousedown', ['$event'])\n    onClickHostHandler(event: any) {\n\n        //  if(this.onClickAssignment_ignore == false){\n        //    //this.assignment_selected = null;\n        //    console.log(\"this.assignment_selected = null;\");\n        //  }\n        //  this.onClickAssignment_ignore = false;\n    }\n\n    openSelectVehicleDialog() {\n        //        console.log(this.selectedVehiclesSimple);\n        //        this.dialog.open(SelectVehicleComponent, {\n        //            data: {\n        //                selected_vehicles: this.selectedVehiclesSimple\n        //            }\n        //        });\n    }\n\n    //  @HostListener('mousewheel', ['$event'])\n    //     scroll(event: MouseEvent) {\n    //         //this.renderer.selectRootElement(this.scrolledWidget).nativeElement.scroll(10, 0);\n\n    //         this.scrolledParent.nativeElement.scrollLeft = 30;\n    //         console.log(this.scrolledParent.nativeElement.scrollLeft);\n    //         return false;\n    //         // let wheelDelta = Math.max(-1, Math.min(1, (event.wheelDelta || -event.detail)));\n    //         // if(wheelDelta > 0) {\n    //         //   factor = 0.5;\n    //         // }else {\n    //         //  factor = 2.0;\n    //         // }\n\n    //         // this.initPointX = event.PageX;\n    //         // this.initPointY = event.PageY;\n    //     }\n\n    public onDragActor(ev: DragEvent) {\n        let dataTransfer = {id: (<any>ev.target).dataset.assignmentemployeeid, operation: 'move'};\n        ev.dataTransfer.setData(\"text/json\", JSON.stringify(dataTransfer));\n        //(<any>ev.target).style.visibility = 'hidden';\n        //(<any>ev.target).style.transform = 'translateX(-9999px)';\n        ev.dataTransfer.effectAllowed = \"move\";\n        //console.log(\"drag\");\n\n        let elementCoords = this.elementCoords(ev.target);\n        //this._dnd_t_offset_x = ev.clientX-elementCoords.x;\n        //this._dnd_t_offset_y = ev.clientY-elementCoords.y;\n        this._dnd_t_offset_x = 0;\n        this._dnd_t_offset_y = 0;\n        this._dnd_element = ev.target;\n    }\n\n    public onDragConsultant(ev: DragEvent) {\n        let dataTransfer = {id: (<any>ev.target).dataset.driverid, entityType: 'consultant'};\n        ev.dataTransfer.setData(\"text/json\", JSON.stringify(dataTransfer));\n        //(<any>ev.target).style.visibility = 'hidden';\n        //(<any>ev.target).style.transform = 'translateX(-9999px)';\n        ev.dataTransfer.effectAllowed = \"copy\";\n        //console.log(\"drag\");\n\n        let elementCoords = this.elementCoords(ev.target);\n        //this._dnd_t_offset_x = ev.clientX-elementCoords.x;\n        //this._dnd_t_offset_y = ev.clientY-elementCoords.y;\n        this._dnd_t_offset_x = 0;\n        this._dnd_t_offset_y = 0;\n        this._dnd_element = ev.target;\n    }\n\n    public onDragRegistrar(ev: DragEvent) {\n        let dataTransfer = {id: (<any>ev.target).dataset.driverid, entityType: 'registrar'};\n        ev.dataTransfer.setData(\"text/json\", JSON.stringify(dataTransfer));\n        //(<any>ev.target).style.visibility = 'hidden';\n        //(<any>ev.target).style.transform = 'translateX(-9999px)';\n        ev.dataTransfer.effectAllowed = \"copy\";\n        console.log(\"onDragRegistrar: \"+ (<any>ev.target).dataset.trailerid);\n\n        let elementCoords = this.elementCoords(ev.target);\n        this._dnd_t_offset_x = ev.clientX-elementCoords.x;\n        this._dnd_t_offset_y = ev.clientY-elementCoords.y;\n        this._dnd_element = ev.target;\n    }\n\n    public onDragAssignment(ev: DragEvent) {\n        ev.dataTransfer.setData(\"text/json\", JSON.stringify({id:(<any>ev.target).dataset.assignmentid}));\n        //(<any>ev.target).style.visibility = 'hidden';\n        //(<any>ev.target).style.transform = 'translateX(-9999px)';\n        ev.dataTransfer.effectAllowed = \"move\";\n        //console.log(\"drag\");\n\n        let elementCoords = this.elementCoords(ev.target);\n        this._dnd_t_offset_x = ev.clientX-elementCoords.x;\n        this._dnd_t_offset_y = ev.clientY-elementCoords.y;\n        this._dnd_element = ev.target;\n    }\n\n    public onDragConsultantEnd(ev: DragEvent) {\n        //(<any>ev.target).style.visibility = 'visible';\n        //(<any>ev.target).style.transform = 'translateX(0px)';\n        this._dnd_t_offset_x = 0;\n        this._dnd_t_offset_y = 0;\n        this._dnd_element = null;\n    }\n\n    public onDragOver(ev: DragEvent) {\n        ev.preventDefault();\n    }\n\n    public removeUserFromAssignment(assignmentUserId: number|string) {\n        console.log('removeUserFromAssignment: '+assignmentUserId);\n        let index = null;\n        let c = 0;\n        for(let assignmentShift of this.assignment_selected.assignmentEmployees) {\n            if(assignmentShift.id == assignmentUserId){\n                index = c;\n                break;\n            }\n            c++;\n        }\n\n        if(index != null) {\n            this.assignment_selected.assignmentEmployees.splice(index, 1);\n        }\n\n        this.saveAssignment(this.assignment_selected);\n    }\n\n    public deleteAssignmentUI(assignmentId: number|string) {\n        this.dialog.open(ConfirmDialog, {\n            data: {\n                message: \"Are you sure you want to delete assignment \"+assignmentId+\"?\",\n                yesButtonLabel: \"Yes, delete it!\", \n                noButtonLabel: \"No, keep it\",\n                yesCallback: () => {\n                    this.deleteAssignment(assignmentId);\n                },\n            }\n        });\n    }\n\n    public deleteAssignmentLocally(assignmentId: number|string) {\n        let vi = null;\n        let ai = null;\n\n        let vc = 0;\n        let ac = 0;\n        SEEK_ASSIGNMENT:\n        for(let vehicle of this.activitySchedule) {\n            for (let ass of vehicle.assignments) {\n                if(ass.assignmentId == assignmentId) {\n                    vi = vc;\n                    ai = ac;\n                    break SEEK_ASSIGNMENT;\n                }\n                ac++;\n            }\n            vc++;\n            ac=0;\n        }\n\n        if(vi!=null && ai!=null){\n            this.activitySchedule[vi].assignments.splice(ai, 1);\n            this.assignment_selected = null;\n        }\n    }\n\n    public deleteAssignment(assignmentId: number|string) {\n        this.schedule3Service.deleteAssignment(assignmentId, () => {\n            this.deleteAssignmentLocally(assignmentId);\n        });\n    }\n\n    public selectAssignment(assignmentId:number) {\n        console.log('assignmentid: '+assignmentId);\n        if(this.assignment_selected != null) {\n            let exSelected = document.querySelector(\"#assignment\"+this.assignment_selected.assignmentId);\n            exSelected.classList.remove(\"assignmentSelected\");\n        }\n        let selected = document.querySelector(\"#assignment\"+assignmentId);\n        selected.classList.add(\"assignmentSelected\");\n\n        //this.applyMainWidgetsSizes();\n        this.assignment_selected = this.getAssignment(assignmentId);\n        console.log(this.assignment_selected);\n        this.assignment_selected.z_index = ++this.reached_z_index;\n        //this.onClickAssignment_ignore = true;\n        this.calculateOverlappedAssignments();\n        this._periodForm_from = this.assignment_selected.startTime.get_ISO_8601_Date();\n        this._periodForm_to = this.assignment_selected.startTime.plusLength(this.assignment_selected.timeLength).get_ISO_8601_Date();\n        for(let index in this.periodFormFields.controls) {\n            this.periodFormFields.controls[index].disable();\n        }\n\n//        setTimeout(() => {\n//            let assignPanelDetails = document.querySelector(\".assignPanelDetails\");\n//            this.renderer2.listen(assignPanelDetails, \"scroll\", this.assignPanelDetailsScrollCallback);\n//            setTimeout(() => this.centralizeActiveTab(), 0);\n//            setTimeout(() => this._scaleView(), 0);\n//        }, 0);\n\n        //this.periodFormFields.setValue({dateFrom: this.assignment_selected.startTime.getShortDateWithYear(),\n        //    dateTo:this.assignment_selected.startTime.plusLength(this.assignment_selected.timeLength).getShortDateWithYear()});\n        this.applyMainWidgetsSizes();\n    }\n\n    private bubbleSort(array: any[], property: string) {\n        for(let i=(array.length -1); i >= 0; i--) {\n            for(let j=1; j <=i; j++) {\n                if (array[j-1][property]> array[j][property]) {\n                    let tmp = array[j-1];\n                    array[j-1] = array[j];\n                    array[j] = tmp;\n                }\n            }\n        }\n    }\n\n    private getMouseClickTarget(ev: MouseEvent) {\n\n        let schedules = document.querySelectorAll(\".timeContainer\") as any;\n        let schedule;\n        for(let sch of schedules) {\n            let box = sch.getBoundingClientRect();\n            if(box.top < ev.clientY && box.height + box.top > ev.clientY) {\n                schedule = sch;\n                break;\n            }\n        }\n\n        if(schedule == null) {\n            return ev.target;\n        }\n\n        let overlapped = [];\n        for(let ass of this.activitySchedule[schedule.dataset.index].assignments) {\n            let scrolledParentBox = this.scrolledParent.nativeElement.getBoundingClientRect();\n            let assignmentX = (ass.offsetLeft - this.scrollbarX.nativeElement.scrollLeft) + scrolledParentBox.left;\n            if(ev.clientX > assignmentX && ev.clientX < assignmentX + ass.width) {\n                overlapped.push({...ass, cursorProximity: ev.clientX - assignmentX});\n            }\n        }\n\n        this.bubbleSort(overlapped, 'cursorProximity');\n        let target = document.querySelector(\"#assignment\"+overlapped[0].assignmentId);\n        if(this.assignment_selected != null) {\n            if(this.assignment_selected.assignmentId == overlapped[0].assignmentId &&\n                overlapped[1] != null) {\n                target = document.querySelector(\"#assignment\"+overlapped[1].assignmentId);\n            }\n        }\n        return target;\n    }\n\n    public onClickAssignment(ev: MouseEvent) {\n\n        let target = this.getMouseClickTarget(ev) as any;\n        if(target.dataset.assignmentid == null) {\n            do {\n                target = target.parentNode;\n            }\n            while(target.dataset.assignmentid == null);\n        }\n\n        if(ev.shiftKey != true) {\n            // if(this.assignment_selected != null) {\n            //     this.assignment_selected.z_index = 0;\n            // }\n            //ev.preventDefault();\n            this.selectAssignment(target.dataset.assignmentid);\n            return true;\n        }\n        ev.preventDefault();\n        //\n        //        this._resize_target = target;\n        //\n        //        let elementCoords = this.elementCoords(this._resize_target);\n        //        let targetLeftOffset = target.offsetLeft;\n        //        let relX = (<any>event).clientX-elementCoords.x;\n        //        //this._resize_target.style.width = relX;\n        //\n        //        if (relX < 30) {\n        //            this._resize_side = 'left';\n        //        }\n        //        else if(relX > (this._resize_target.offsetWidth - 30)) {\n        //            this._resize_side = 'right';\n        //        }\n        //        else {\n        //            this._resize_side = 'center';\n        //            this._dnd_t_offset_x = ev.clientX-elementCoords.x;\n        //        }\n\n        this.scrollbarX.nativeElement.scrollLeft =\n            (this.assignment_selected.offsetLeft - (this.mightyParent.nativeElement.clientWidth /2));\n    }\n\n    public calculateOverlappedAssignments() {\n        for(let i in this.activitySchedule) {\n            if(this.activitySchedule[i].activity.id == this.assignment_selected.assignmentActivities[0].activity.id) {\n                this.scheduleIndex = parseInt(i);\n                break;\n            }\n        }\n\n        this.bubbleSort(this.activitySchedule[this.scheduleIndex].assignments, 'offsetLeft');\n\n        this.assignments_overlapped.length = 0;\n        if(this.scheduleIndex > -1) {\n            for(let ass of this.activitySchedule[this.scheduleIndex].assignments) {\n                if((ass.startTime.isGreaterOrEqual(this.assignment_selected.startTime) ||\n                    ass.startTime.plusLength(ass.timeLength).isGreaterOrEqual(this.assignment_selected.startTime)) &&\n                    (ass.startTime.isLessOrEqual(this.assignment_selected.startTime.plusLength(this.assignment_selected.timeLength)) ||\n                        ass.startTime.plusLength(ass.timeLength).isLessOrEqual(this.assignment_selected.startTime.plusLength(this.assignment_selected.timeLength)))){\n                    this.assignments_overlapped.push(ass);\n                }\n            }\n        }\n    }\n\n    public switchAssignPanelTab(assignmentId: number) {\n        this.selectAssignment(assignmentId);\n    }\n\n    public onMouseUp(event: MouseEvent) {\n        //this.schedule1Service.updateAssignment();\n        //let assignmentId = this._resize_target.dataset.assignmentId;\n        this.applyAssingmentTransformation(this._resize_target);\n\n        this._resize_target = null;\n        this._resize_side = '';\n        this._dnd_t_offset_x = 0;\n    }\n\n    /** Applies assignment transformation (moving along vehicle's timeline, changing\n     * assignment's period (visual element size).\n     *\n     * @param HTMLElement assignment element\n     * @return void\n     */\n    public applyAssingmentTransformation(target: any): void{\n        if(target == null) {\n            return;\n        }\n\n        let assignmentId = target.dataset.assignmentid;\n        let startTime = this.computeStartTime(target.offsetLeft);\n        let timeLength = this.computeTimeLength(parseInt(target.style.width));\n\n        console.log('updateAssignment: '+assignmentId);\n        let assignment = this.getAssignment(assignmentId);\n        assignment.startTime = startTime;\n        assignment.timeLength = timeLength;\n        assignment.width = parseInt(target.style.width);\n        assignment.offsetLeft = parseInt(target.offsetLeft);\n\n        this.schedule3Service.saveAssignment(assignment, () => {});\n    }\n\n    public getAssignment(assignmentId: number) {\n        for(let v of this.activitySchedule) {\n            for (let a of v.assignments) {\n                if (a.assignmentId == assignmentId) {\n                    return a;\n                }\n            }\n        }\n        return null;\n    }\n\n    public onMouseMove(event: MouseEvent) {\n        if(this._resize_target != null) {\n            if(this._resize_side == 'right'){\n                let elementCoords = this.elementCoords(this._resize_target);\n                let relX = this.alignAssignment((<any>event).clientX-elementCoords.x, 'hour');\n                let width = this.alignAssignment(relX, \"meridiem_ceil\");\n                let maxWidth = this.computeWidth(\"D\");\n                width  = maxWidth > width ? width : maxWidth;\n                if(width > 0) {\n                    this._resize_target.style.width = width + \"px\";\n                }\n                console.log(\"resize; \"+relX);\n            }\n            else if(this._resize_side == 'left'){\n                let elementCoords = this.elementCoords(this.scrolledWidget.nativeElement);\n                //let relX = (<any>event).clientX-elementCoords.x;\n                let relX = this.alignAssignment((<any>event).clientX-elementCoords.x, 'hour');\n\n                let growth = parseInt(this._resize_target.style.left) - Math.ceil(relX);\n                let width = this._resize_target.offsetWidth + growth;\n                let maxWidth = this.computeWidth(\"D\");\n                width  = maxWidth > width ? width : maxWidth;\n                if(width > 0) {\n                    this._resize_target.style.width = this.alignAssignment(width, \"meridiem_ceil\") +\"px\";\n                }\n                this._resize_target.style.left = this.alignAssignment(relX, \"meridiem_ceil\")+\"px\";\n            }\n            else if(this._resize_side == 'center') {\n                let elementCoords = this.elementCoords(this.scrolledWidget.nativeElement);\n                //let relX = (<any>event).clientX-elementCoords.x;\n                let relX = this.alignAssignment((<any>event).clientX-elementCoords.x, 'hour');\n\n                console.log('clientX:'+(<any>event).clientX+' '+relX);\n                let growth = parseInt(this._resize_target.style.left) - (<any>event).clientX;\n\n                let width = this._resize_target.offsetWidth + growth;\n                let maxWidth = this.computeWidth(\"D\");\n                width  = maxWidth > width ? width : maxWidth;\n                console.log(\"offsetWidth:\"+this._resize_target.offsetWidth+\" growth:\"+growth);\n                console.log('width: '+this._resize_target.style.width);\n                //this._resize_target.style.left = Math.ceil(relX)+\"px\";\n\n                let assignment = this.getAssignment(this._resize_target.dataset.assignmentid);\n                if(assignment.shift == 'D') {\n                    this._resize_target.style.left = this.alignAssignment(((relX)-this._dnd_t_offset_x), \"day\")+\"px\";\n                }\n                else //if(assignment.shift == 'AM' or 'PM')\n                {\n                    this._resize_target.style.left = this.alignAssignment(((relX)-this._dnd_t_offset_x), \"meridiem\")+\"px\";\n                }\n                console.log(\"style.left; \"+this._resize_target.style.left+\"; \");\n            }\n        }\n    }\n\n    public elementCoords ( node: any ) {\n        //let node = <any>event.target;\n        if (node.getBoundingClientRect) {\n            var rect = node.getBoundingClientRect();\n            var sx = -(window.scrollX ? window.scrollX : window.pageXOffset);\n            var sy = -(window.scrollY ? window.scrollY : window.pageYOffset);\n\n            return {\n                x: rect.left - sx,\n                y: rect.top - sy,\n                width: rect.width,\n                height: rect.height,\n            }\n        }\n    }\n\n    public elementCoordsDocument ( node: any ) {\n        //let node = <any>event.target;\n        if (node.getBoundingClientRect) {\n            var rect = node.getBoundingClientRect();\n            var sx = -(window.scrollX ? window.scrollX : window.pageXOffset);\n            var sy = -(window.scrollY ? window.scrollY : window.pageYOffset);\n\n            sx -= this.scrolledParent.nativeElement.scrollLeft;\n            sy -= this.scrolledParent.nativeElement.scrollTop;\n\n            return {\n                x: rect.left - sx,\n                y: rect.top - sy\n            }\n        }\n    }\n\n    public computeStartTime(offsetLeft: number) {\n        let offsetHours = offsetLeft / (this._scale_factor * this._hour_width);\n        let startTime = this.days[0].fork();\n        startTime.date.setTime(startTime.date.getTime() + (offsetHours*3600000));\n        startTime.date.setHours(0);\n        startTime.date.setMinutes(0);\n        startTime.date.setSeconds(0);\n        startTime.date.setMilliseconds(0);\n\n        return startTime;\n    }\n\n    public computeTimeLength(width: number) {\n        let hours = width / (this._scale_factor * this._hour_width);\n        let tmLength = new TmLength();\n        tmLength.setHours(hours);\n\n        return tmLength;\n    }\n\n    public onDropDriver(ev: DragEvent, add: boolean) {\n        let target = null;\n        if(ev.target == this._dnd_element) {\n            target = (<any>ev.target).parentNode;\n        } else {\n            target = ev.target;\n        }\n\n        /** id is either userId (if user is being dragged from the driver list) or assignmentid\n         *  (if the driver id being dragged form the timeline)\n         */\n        let dataTransfer = JSON.parse(ev.dataTransfer.getData(\"text/json\"));\n        let id = dataTransfer.id;\n        let entityType = dataTransfer.entityType;\n        //let entityType = ev.dataTransfer.getData(\"text/plain\");\n\n        let activityid = target.dataset.activityid;\n        let targetActivity = target;\n        if(activityid == null) {\n            do {\n                targetActivity = targetActivity.parentNode;\n                activityid = targetActivity.dataset.activityid;\n            }\n            while(activityid == null);\n        }\n\n\n        //let element = this.document.querySelector('#driver-23');\n\n        //target.appendChild(element);\n        let elementCoords = this.elementCoords(targetActivity);\n        let targetCoords = ((ev.clientX-elementCoords.x)-(target.style.width)-this._dnd_t_offset_x)+\"px\";\n\n        let eventCoordinates = this.alignAssignment(ev.clientX - elementCoords.x - this._dnd_t_offset_x, 'halfday');\n        console.log(eventCoordinates);\n\n        //let fetch_\n        if(ev.dataTransfer.effectAllowed == 'copy') {\n            if(add == false) {\n                let user: AssignmentEmployee;\n                if(entityType == 'registrar'){\n                    for(let r of this.registrars) {\n                        if(r.id == id) {\n                            user = {id: 0, employee:r};\n                            break;\n                        }\n                    }\n                } else /*if(entityType == 'consultant')*/{\n                    for(let c of this.consultants) {\n                        if(c.id == id) {\n                            user = {id: 0, employee:c};\n                            break;\n                        }\n                    }\n                }\n\n                let activity: AssignmentActivity;\n                for(let schedule of this.activitySchedule) {\n                    if(schedule.activity.id == activityid) {\n                        activity = {id: 0, activity: schedule.activity};\n                    }\n                }\n                if(activity != undefined && user != undefined) {\n                    let width = (this._hour_width * this._scale_factor) * 12;\n                    let startTime = this.computeStartTime(eventCoordinates);\n                    let timeLength = this.computeTimeLength(width);\n                    let shift = this.computeShift(eventCoordinates);\n\n                    let assignment = new Assignment({\n                        id: 0,\n                        assignmentId: 0,\n                        assignmentEmployees: [user],\n                        assignmentActivities: [activity],\n                        startTime: startTime,\n                        timeLength: timeLength,\n                        offsetLeft: eventCoordinates,\n                        shift: shift,\n                        shiftName: '',\n                        width: width,\n                        z_index: ++this.reached_z_index,\n                    });\n\n                    this.saveAssignment(assignment);\n                }\n            } else { //if(add = true)\n                // it is possible that event's target may not be the assignment\n                // so we need to take this into account and find the assignment\n                // element\n                if(target.dataset.assignmentid == null) {\n                    do {\n                        target = target.parentNode;\n                    }\n                    while(target.dataset.assignmentid == null);\n                }\n\n                if(entityType != null && entityType == 'trailer') {\n                    //this.addTrailerToAssignment(id, target.dataset.assignmentid);\n                }\n                else {\n                    this.addUserToAssignment(id, target.dataset.assignmentid);\n                }\n            }\n        } else if (ev.dataTransfer.effectAllowed == 'move') {\n            if(dataTransfer.operation == 'move') {\n                let target = (ev as any).currentTarget;\n                this.moveEmployee(id, target.dataset.assignmentid);\n            }\n            else {\n                this.moveAssignment(id, activityid, eventCoordinates);\n            }\n        }\n\n        ev.preventDefault();\n        ev.stopPropagation();\n        return false;\n    }\n\n    public computeShift(coordinates: number) {\n        let remaining = Math.floor(coordinates) % (this._hour_width*this._scale_factor*24);\n        let shift = 'AM';\n        if(remaining > 0) {\n            shift = 'PM';\n        }\n\n        return shift;\n    }\n\n    public addUserToAssignment(id: number|string, assignmentid: number|string){\n        if(typeof(id) == 'string') {\n            id = parseInt(id);\n        }\n        this.userService.getUser(id).then(user => {\n            if(typeof(assignmentid) == 'string') {\n                assignmentid = parseInt(assignmentid);\n            }\n\n            let assignment = this.getAssignment(assignmentid);\n            let isPresent: boolean = false;\n            for(let assUser of assignment.assignmentEmployees) {\n                if(assUser.employee.id == id){\n                    isPresent = true;\n                    break;\n                }\n            }\n            if(!isPresent) {\n                assignment.assignmentEmployees.push({id:0, employee: user});\n                this.saveAssignment(assignment);\n            }\n        });\n    }\n\n    //public createAssignment(assignment: Assignment) {\n    //    this.schedule1Service.saveAssignment(assignment, (assignmentList: any) => {\n    //        this.updateAssignmentLocally(assignment, assignmentList[0]);\n    //        this.pushAssignmentLocally(assignment);\n    //    });\n    //}\n\n    public saveAssignment(assignment: any) {\n        this.schedule3Service.saveAssignment(assignment, (incoming: any) => {\n            assignment.previousAssignmentVehicle = null; // we do not need previous assignment vehicle any more\n            // as we have already sent it to the backend\n            this.updateAssignmentLocally(assignment, incoming.assignmentList[0]);\n            this.pushAssignmentLocally(assignment);\n        });\n    }\n\n    public updateAssignmentLocally(assignment: Assignment, remoteAssignment: any) {\n        try{\n            assignment.assignmentActivities[0].id = remoteAssignment.assignmentActivities[0].id;\n        } catch(e) {\n\n        }\n        try {\n            let newIds = [];\n            let local0i = -1;\n            for(let remoteAEss of remoteAssignment.assignmentEmployees) {\n                let _new = true;\n                let i=0;\n                for(let aess of assignment.assignmentEmployees) {\n                    if(aess.id == 0) {\n                        local0i = i;\n                    }\n                    if(remoteAEss.id == aess.id) {\n                        _new = false;\n                        break;\n                    }\n                    i++;\n                }\n                if(_new) {\n                    newIds.push(remoteAEss.id);\n                }\n            }\n\n            if(newIds.length == 1 && local0i > -1) {\n                assignment.assignmentEmployees[local0i].id = newIds[0];\n            }\n\n        } catch(e) {\n\n        }\n        try {\n            assignment.assignmentId = remoteAssignment.id;\n        } catch(e) {\n\n        }\n    }\n\n    /** Pushes assignment to the local Vehicle Schedule (backend is not bothered). Information about which vehicle it needs to be\n     * attached to is taken from the assignment itself (it has it anyway). Usually assignments are retrieved from the server even when\n     * they had just been created by the user.\n     * A check will be performed whether the assignment was already added to the vehicle's assignment list. If it already exists the\n     * existing assignment will be updated with the new data\n     *\n     * @param Assignment assignment created by the user\n     * @return Assignment either the passed assignment (if it was pushed to the schedule) or the equivalent assignment that already\n     * exists locally\n     */\n    public pushAssignmentLocally(assignment: any) {\n        let exists = false;\n        let ret_assignment = assignment;\n        let targetActivityId;\n        // if(assignment.previousAssignmentVehicle != null) {\n        //     targetActivityId = assignment.previousAssignmentVehicle.vehicle.id;\n        // }\n        // else {\n        targetActivityId = assignment.assignmentActivities[0].activity.id;\n        // }\n\n        for (let schedule of this.activitySchedule) {\n            if(schedule.activity.id == targetActivityId) {\n                for(let ass of schedule.assignments) {\n                    if (ass.assignmentId == assignment.assignmentId) {\n                        ass.startTime = assignment.startTime;\n                        ass.timeLength = assignment.timeLength;\n                        ass.offsetLeft = assignment.offsetLeft;\n                        ass.width = assignment.width;\n                        this.applyPeerChanges(ass.assignmentEmployees, assignment.assignmentEmployees);\n                        if(this.applyPeerChanges(ass.assignmentActivities, assignment.assignmentActivities)) {\n                            this.reapplyAssignmentVehicleLocally(ass.assignmentId);\n                        }\n                        ret_assignment = ass;\n                        exists = true;\n                        break;\n                    }\n                }\n                if(!exists) {\n                    schedule.assignments.push(assignment);\n                }\n                break;\n            }\n        }\n\n        if(this.scheduleIndex > -1) {\n            this.bubbleSort(this.activitySchedule[this.scheduleIndex].assignments, 'offsetLeft');\n        }\n\n        return ret_assignment;\n    }\n    public applyPeerChanges(localAssignUsers: any[], remoteAssignUsers: any[]) {\n        let changed = false;\n\n        let listToRemove = localAssignUsers.filter(x => {\n            //let existsBoth = false;\n            for(let y of remoteAssignUsers) {\n                if(y.id == x.id) {\n                    return false;\n                }\n            }\n\n            return true ;\n        });\n\n        let listToAdd = remoteAssignUsers.filter(x => {\n            //let existsBoth = false;\n            for(let y of localAssignUsers) {\n                if(y.id == x.id) {\n                    return false;\n                }\n            }\n\n            return true;\n        });\n\n        if (listToRemove.length > 0 || listToAdd.length > 0) {\n            changed = true;\n        }\n\n        //let listToAdd = Supplement.array_diff(remoteAssignUsers, localAssignUsers);\n        //    let listToRemove = Supplement.array_diff(localAssignUsers, remoteAssignUsers);\n\n        let _localAssignUsers = localAssignUsers.filter((element, index, array) => {\n            for(let toRem of listToRemove) {\n                if(element.id == toRem.id) {\n                    return false;\n                }\n            }\n            return true;\n        });\n\n        for(let toAdd of listToAdd) {\n            _localAssignUsers.push(toAdd);\n        }\n\n        localAssignUsers.splice(0, _localAssignUsers.length+1, ..._localAssignUsers);\n        return changed;\n    }\n\n    /** Removes assignment locally. It would be returned so if you need it you catch the return from this method\n     *\n     *  @param number assignmentId\n     */\n    public removeAssignmentLocally(assignmentId: number): any{\n        /** vehicle index */\n        let vI = 0;\n        /** schedule index */\n        let sI = 0;\n\n        for (let i in this.activitySchedule) {\n            //if(this.registrarSchedule[i].vehicle.id == vehicleId) {\n            for(let n in this.activitySchedule[i].assignments) {\n                if(this.activitySchedule[i].assignments[n].assignmentId == assignmentId) {\n                    sI = +n;\n                    vI = +i;\n                    let schedule = this.activitySchedule[vI].assignments.splice(sI, 1);\n                    return schedule[0];\n                }\n            }\n        }\n\n        return null;\n    }\n\n    /**\n     * Moves assignment from one place to another, possibly across registrars\n     *\n     * @param id assignment id\n     * @param vehicleId destination vehicle id\n     * @param eventCoordinates position in the timeline in pixels\n     */\n    public moveAssignment(id: number, registrarId: number, eventCoordinates: number) {\n        let assignment = this.removeAssignmentLocally(id);\n        assignment.offsetLeft = eventCoordinates;\n        assignment.startTime = this.computeStartTime(eventCoordinates);\n        // TODO update startTime with eventCoordinates\n        // TODO update startTime with eventCoordinates\n        for (let schdl of this.activitySchedule) {\n            if (schdl.activity.id == registrarId) {\n                assignment.previousAssignmentVehicle = assignment.assignmentActivities[0];\n                assignment.assignmentActivities[0] = {id:0, activity: schdl.activity};\n                this.saveAssignment(assignment);\n                break;\n            }\n        }\n    }\n\n    public moveEmployee(assignmentEmployeeId: number, assignmentId: number) {\n        let i=-1;\n        for(let ae of this.assignment_selected.assignmentEmployees) {\n            i++;\n            if(ae.id == assignmentEmployeeId) {\n                break;\n            }\n        }\n\n        let assEm;\n        if(i != -1) {\n            assEm = this.assignment_selected.assignmentEmployees.splice(i, 1);\n        }\n\n        this.schedule3Service.moveEmployee(assEm, assignmentId, () => {\n            let assignment = this.getAssignment(assignmentId);\n            assignment.assignmentEmployees.push(assEm[0]);\n        });\n    }\n\n    public reapplyAssignmentVehicleLocally(assignmentId: number) {\n        let assignment = this.removeAssignmentLocally(assignmentId);\n        let registrarId = assignment.assignmentActivities[0].vehicle.id;\n\n        for(let schedule of this.activitySchedule) {\n            if(schedule.registrar.id == registrarId) {\n                schedule.assignments.push(assignment);\n                break;\n            }\n        }\n    }\n    // public getPositionInDocument(m_posx: number, m_posy: number, obj: any) {\n    //     let e_posx = 0;\n    //     let e_posy = 0;\n    //     if (obj.offsetParent){\n    //         do {\n    //             e_posx += obj.offsetLeft;\n    //             e_posy += obj.offsetTop;\n    //             console.log('e_posx:'+e_posx+\"  e_posy:\"+e_posy);\n    //         } while (obj = obj.offsetParent);\n    //     }\n\n    //     console.log('e_posx:'+e_posx+\"  e_posy:\"+e_posy);\n    // }\n    //\n    public applyAssignmentPeriodFromForm() {\n        //        let assignmentId = target.dataset.assignmentid;\n        //        let startTime = this.computeStartTime(target.offsetLeft);\n        //        let timeLength = this.computeTimeLength(parseInt(target.style.width));\n        //\n        //        console.log('updateAssignment: '+assignmentId);\n        //        let assignment = this.getAssignment(assignmentId);\n        //        assignment.startTime = startTime;\n        //        assignment.timeLength = timeLength;\n        //        assignment.width = parseInt(target.style.width);\n        //\n        //        this.schedule1Service.saveAssignment(assignment, () => {});\n        //        console.log(\"apply\");\n        //\n        //\n        //            assignment.assignmentId = assignment.id;\n        //\n        //            assignment.startTime = new TmDate();\n        //            assignment.startTime.date.setTime(assignment.dateFrom-(assignment.startTime.date.getTimezoneOffset()*60000));\n        //            assignment.timeLength = new TmLength();\n        //            assignment.timeLength.seconds = (assignment.dateTo - assignment.dateFrom) / 1000;\n        //            assignment.offsetLeft = Math.floor(((assignment.startTime.date.getTime()/3600000) - this.days[0].date.getTime()/3600000)+1) * (this._hour_width * this._scale_factor);\n        //            //ass.offsetLeft = 40;\n        //            assignment.width = ((assignment.timeLength.seconds) / 3600) * (this._hour_width * this._scale_factor);\n        //            assignment = this.pushAssignmentLocally(assignment);\n    }\n\n    public onChangeScheduleStartDate(newValue: any) {\n        let date = new TmDate();\n        date.setFromDate(newValue);\n        this.initView(date);\n\n        let vehicleIds: string[] = [];\n        for(let id in this.selectedActivitiesSimple.vehicles) {\n            if(this.selectedActivitiesSimple.vehicles[id] == true) {\n                vehicleIds.push(id);\n            }\n        }\n        let timeLength = new TmLength();\n        timeLength.seconds = this.hours.length * 3600;\n        this.loadAssignments(this.days[0], timeLength, vehicleIds);\n    }\n\n    public closeAssignmentPanel() {\n        if(this.assignment_selected != null) {\n            let exSelected = document.querySelector(\"#assignment\"+this.assignment_selected.assignmentId);\n            exSelected.classList.remove(\"assignmentSelected\");\n        }\n        this.assignment_selected = null;\n        setTimeout(() => {\n            this._scaleView();\n            this.applyCustomScrollbars();\n        }, 0);\n    }\n\n    public assignPanelDetailsScrollCallback (event: Event) {\n        let panelScroll = document.querySelector(\".assignPanelDetails\").scrollTop;\n        let elements = document.querySelectorAll(\".assignPanelDetails > div.dont-scroll\") as any;\n        for(let div of elements) {\n            div.style.marginTop = panelScroll + \"px\";\n        }\n    }\n\n    public alignAssignment(coordinates: number, granularity: string) {\n        let remaining;\n        switch(granularity) {\n            case 'hour':\n                remaining = Math.floor(coordinates) % (this._hour_width*this._scale_factor);\n                coordinates -= remaining;\n                break;\n            case 'halfday':\n                remaining = Math.floor(coordinates) % (this._hour_width*this._scale_factor*12);\n                coordinates -= remaining;\n                break;\n        }\n\n        coordinates+=this.reservedOffsetLeft;\n        return coordinates;\n    }\n\n    public generateSchedule(_startDate:any, _endDate:any) {\n        this.loadingIndication = 'block';\n        this.assignment_selected = null;\n        let activityIds = [];\n        for(let s of this.activitySchedule) {\n            s.assignments.length = 0;\n            activityIds.push(s.activity.id);\n        }\n\n        let timeLength = new TmLength();\n        timeLength.seconds = (_endDate.date.getTime() - _startDate.date.getTime()) / 1000;\n\n        this.schedule3Service.generateSchedule(_startDate, timeLength, (response:any) => {\n            this.loadAssignments(_startDate, timeLength, activityIds);\n            this.loadingIndication = 'none';\n        });\n    }\n\n    public generateScheduleUI(assignmentId: number|string) {\n        this.dialog.open(ConfirmDialog, {\n            data: {\n                message: \"Generating schedule will wipe its data and regenerate it according to data from the other two schedules. \" +\n                \"Any changes done so far manually will be lost! Please be patient, schedule related processing is time consuming \" +\n                \"and you may need to wait several minutes\",\n                yesButtonLabel: \"Yes, generate it!\", \n                noButtonLabel: \"No, leave it\",\n                yesCallback: (_startDate:any, _endDate:any) => {\n                    this.generateSchedule(_startDate, _endDate);\n                    console.log(\"generate\");\n                },\n            }\n        });\n    }\n\n    public _printRegistrarHeader(assignmentEmployees: any) {\n        let c = 0;\n        for(let e of assignmentEmployees) {\n            if(e.employee.grade == 'SeniorRegistrar' || e.employee.grade == 'JuniorRegistrar') {\n                c++;\n            }\n        }\n\n        let count_str = '1 registrar';\n        if(c != 1) {\n            count_str = c + ' registrars';\n        }\n\n        return count_str;\n    }\n\n    public _getRegistrarInitials(registrar: any) {\n        let initials = registrar.firstName.substr(0, 1)+'.';\n        if(registrar.lastName.length > 0) {\n            initials += ' '+registrar.lastName.substr(0, 1)+'.';\n        }\n\n        return initials;\n    }\n\n    public _printConsultantHeader(assignmentEmployees: any) {\n        let c = 0;\n        let header = '';\n        for(let e of assignmentEmployees) {\n            if(e.employee.grade == 'Consultant') {\n                header = this._getRegistrarInitials(e.employee);\n            }\n        }\n\n        if(header.length == 0) {\n            header = 'No Consultant!';\n        }\n        return header;\n    }\n\n    public _isThereConsultants(assignmentEmployees: any) {\n        let c = 0;\n        for(let e of assignmentEmployees) {\n            if(e.employee.grade == 'Consultant') {\n                c++;\n            }\n        }\n\n        return c;\n    }\n\n    public _printRegistrarHeaderPanel() {\n        let c = 0;\n        for(let e of this.assignment_selected.assignmentEmployees) {\n            if(e.employee.grade == 'JuniorRegistrar' || e.employee.grade == 'SeniorRegistrar') {\n                c++;\n            }\n            if(c > 1) {\n                break;\n            }\n        }\n\n        let header = 'Registrar';\n        if(c != 1) {\n            header = 'Registrars';\n        }\n\n        return header;\n    }\n\n    public _printConsultantHeaderPanel() {\n        let c = 0;\n        for(let e of this.assignment_selected.assignmentEmployees) {\n            if(e.employee.grade == 'Consultant') {\n                c++;\n            }\n            if(c > 1) {\n                break;\n            }\n        }\n\n        let header = 'Consultant';\n        if(c != 1) {\n            header = 'Consultants';\n        }\n\n        return header;\n    }\n\n    public _printSHOHeaderPanel() {\n        let c = 0;\n        for(let e of this.assignment_selected.assignmentEmployees) {\n            if(e.employee.grade == 'SHO') {\n                c++;\n            }\n            if(c > 1) {\n                break;\n            }\n        }\n\n        let header = 'SHO';\n        if(c != 1) {\n            header = 'SHOs';\n        }\n\n        return header;\n    }\n\n    public _getAssignmentConsultants() {\n        let employees = [];\n        for(let e of this.assignment_selected.assignmentEmployees) {\n            if(e.employee.grade == 'Consultant') {\n                employees.push(e);\n            }\n        }\n\n        return employees;\n    }\n\n    public _getAssignmentSHOs() {\n        let employees = [];\n        for(let e of this.assignment_selected.assignmentEmployees) {\n            if(e.employee.grade == 'SHO') {\n                employees.push(e);\n            }\n        }\n\n        return employees;\n    }\n\n    public _getAssignmentRegistrars() {\n        let employees = [];\n        for(let e of this.assignment_selected.assignmentEmployees) {\n            if(e.employee.grade == 'JuniorRegistrar' || e.employee.grade == 'SeniorRegistrar') {\n                employees.push(e);\n            }\n        }\n\n        return employees;\n    }\n\n    public _getAssignmentOthers() {\n        let employees = [];\n        for(let e of this.assignment_selected.assignmentEmployees) {\n            if(e.employee.grade != 'JuniorRegistrar' && e.employee.grade != 'SeniorRegistrar' &&\n               e.employee.grade != 'SHO' && e.employee.grade != 'Consultant') {\n                employees.push(e);\n            }\n        }\n\n        return employees;\n    }\n\n    public _isEmployeeConsultant(employee: User) {\n        return employee.grade == 'Consultant';\n    }\n\n    public _isEmployeeRegistrar(employee: User) {\n        return employee.grade == 'JuniorRegistrar' || employee.grade == 'SeniorRegistrar';\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/konstantin/svn/rota-client/src/app/admin/schedule3/manage.component.ts","module.exports = \"<span>{{message}}</span>\\n<div style=\\\"clear:both\\\"></div>\\n\\n<mat-input-container>\\n  <input matInput  [min]=\\\"_minDate\\\" [max]=\\\"_maxDate\\\" [matDatepicker]=\\\"picker\\\" [(ngModel)]='_startDate' placeholder=\\\"Start Date\\\">\\n  <mat-datepicker-toggle matSuffix [for]=\\\"picker\\\"></mat-datepicker-toggle>\\n</mat-input-container>\\n<mat-datepicker #picker></mat-datepicker>\\n\\n<mat-input-container>\\n  <input matInput  [min]=\\\"_minDate\\\" [max]=\\\"_maxDate\\\" [matDatepicker]=\\\"pickerEnd\\\" [(ngModel)]='_endDate' placeholder=\\\"End Date\\\">\\n  <mat-datepicker-toggle matSuffix [for]=\\\"pickerEnd\\\"></mat-datepicker-toggle>\\n</mat-input-container>\\n<mat-datepicker #pickerEnd></mat-datepicker>\\n\\n<button mat-raised-button color=\\\"accent\\\" (click)=\\\"onYesClick()\\\">{{yesButtonLabel}}</button>\\n<button mat-raised-button #defaultButton (click)=\\\"onNoClick()\\\">{{noButtonLabel}}</button>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/konstantin/svn/rota-client/src/app/admin/schedule3/manage/confirm-assignment-erase.html\n// module id = ../../../../../src/app/admin/schedule3/manage/confirm-assignment-erase.html\n// module chunks = 5","import { NgModule, HostListener} from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n\nimport { Component, ViewChild, Inject, ElementRef } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA, MatInputModule, MatPaginator} from '@angular/material';\nimport { DatePipe } from '@angular/common';\nimport { Router } from '@angular/router';\nimport { DataSource } from '@angular/cdk/table';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\n//import { VehicleService } from '../../../service/vehicle.service';\nimport { Observable } from 'rxjs/Rx';\nimport { LocalStorageService } from 'angular-2-local-storage';\n\n\nimport { TmLength, TmDate } from '../../../model/tmdate';\n/** importing Models */\n//import { Vehicle } from '../../../model/vehicle';\n\n@Component({\n    templateUrl: './confirm-assignment-erase.html',\n    styles: [`\n    span {\n        margin: 1em;\n        margin-bottom: 8em;\n    }\n\n    div {\n        height: 4em;\n    }\n\n    button {\n        float:right;\n        margin-right: 1em;\n    }\n\n    button:last-of-type {\n        margin-right: 2em;\n    }\n  `]\n})\n\nexport class ConfirmDialog{\n\n    public message = \"\";\n    public yesButtonLabel = \"\";\n    public noButtonLabel = \"\";\n    public _startDate:any = \"\";\n    public _endDate:any = \"\";\n\n    public _minDate = \"\";\n    public _maxDate = \"\";\n    private yesCallback: Function;\n    @ViewChild('defaultButton') private defaultButton: ElementRef;\n\n\n    constructor (\n        private dialogRef: MatDialogRef<ConfirmDialog>,\n        private router: Router,\n        //private userService: VehicleService,\n        private localStorageService: LocalStorageService,\n        @Inject(MAT_DIALOG_DATA) public data: any) {\n        this.message = data.message;\n        this.yesButtonLabel = data.yesButtonLabel;\n        this.noButtonLabel = data.noButtonLabel;\n        this.yesCallback = data.yesCallback;\n    }\n\n    ngOnInit() {\n        let startDate = TmDate.today();\n        startDate.date.setTime(startDate.date.getTime()+(24*3600000));\n        this._startDate = startDate.get_ISO_8601_Date();\n\n        let endDate = TmDate.today();\n        endDate.date.setTime(startDate.date.getTime()+(24*3600000));\n        this._endDate = endDate.get_ISO_8601_Date();\n\n        this._minDate = startDate.get_ISO_8601_Date();\n\n        startDate.date.setTime(startDate.date.getTime()+(365*24*3600000));\n        this._maxDate = startDate.get_ISO_8601_Date();\n    }\n\n    ngAfterViewInit() {\n        setTimeout(() => {\n            try{\n                this.defaultButton.nativeElement.focus();\n            } catch (e) {\n                //...shhhh\n            }\n        }, 500);\n    }\n\n    private onNoClick(): void {\n        this.dialogRef.close();\n    };\n\n    private onYesClick(): void {\n\n        let startDate = new TmDate();\n        startDate.setFromDate(this._startDate+\" UTC\");\n\n        let endDate = new TmDate();\n        endDate.setFromDate(this._endDate+\" UTC\");\n\n        this.yesCallback(startDate, endDate);\n        this.dialogRef.close();\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/konstantin/svn/rota-client/src/app/admin/schedule3/manage/confirm-assignment-erase.ts","module.exports = \"<router-outlet></router-outlet>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/konstantin/svn/rota-client/src/app/admin/schedule3/schedule.component.html\n// module id = ../../../../../src/app/admin/schedule3/schedule.component.html\n// module chunks = 5","import { Component, HostListener } from '@angular/core';\nimport { Location } from '@angular/common';\nimport { RouterModule, Routes, ActivatedRoute, ParamMap, Router, NavigationEnd }  from '@angular/router';\nimport 'rxjs/add/operator/switchMap';\nimport { MatTabsModule } from '@angular/material';\n\n// parent class\nimport { TabbedComponent } from '../../model/tabbed.component';\n\nimport { LocalStorageService } from 'angular-2-local-storage';\n\nimport { AdminComponent } from '../admin.component';\n\nimport { HistoryService } from '../../service/history.service';\n\n@Component({\n  templateUrl: './schedule.component.html',\n  //styleUrls: ['./schedule.component.css'],\n})\n\nexport class ScheduleComponent3 extends TabbedComponent {\n\n    navLinks: NavLink[] = [\n      {label: 'Manage', ref: 'manage', id: -1, default: true},\n    ];\n\n    // activeUserId = 0;\n    // public state = 'out';\n\n    // animationEnded(event: any) {\n    //   console.log(\"animationEnded\");\n    // }\n\n    // ngOnInit() {\n    //   console.log(this.state);\n    //   //this.state = 'active';\n    //   console.log(this.state);\n    //   setTimeout(()=> this.state='in', 1);\n    // }\n\n    // ngOnDestroy() {\n    //   //this.state = 'inactive';\n    //   setTimeout(()=> this.state='out', 1);\n    // }\n\n    constructor (private route: ActivatedRoute,\n                 protected router:Router,\n                 protected location:Location,\n                 private localStorageService: LocalStorageService,\n                 private historyService: HistoryService,\n                 private adminComponent: AdminComponent) {\n                   super(location, router);\n                 }\n\n\n    ngOnInit() {\n    //   this.restoreProperties();\n       this.adminComponent.setActive(this.constructor.name);\n\n    //     let params = this.route.snapshot.queryParams;\n    //     if(params[\"redirectTo\"] != null && params[\"redirectTo\"] == 'lastVisited') {\n    //           let lastRoute = this.localStorageService.get(this.constructor.name+'.lastRoute');\n    //           if(lastRoute != null) {\n    //             this.router.navigate([lastRoute]);\n    //           }\n    //     }\n    }\n    /** Opens a new tab. It's title will initialy be simply of the form \"id999\" where 999 is the userId passed to\n     *  this method. The child component (EditUser if nobody has changed it) will update tab's title with user's\n     *  name as soon as it has fetched the user object from the server.\n     */\n    // editUser(userId:any): void {\n    //   for (let link of this.navLinks) {\n    //     if(link.id == userId){\n    //       return;\n    //     }\n    //   }\n\n    //   this.navLinks.push({label: \"id\"+userId, ref: 'edit-user/'+userId, id: userId, default: false});\n    //   //this.history.push({id: userId});\n    // }\n\n    public pushHistory(id: number) {\n      this.history.push({id: id});\n    }\n\n\n    /** Closes a tab associated with the given userId. Method will check whether that tab is open and if that's the\n     *  case will go back one step in browser's history (that's the most natural behaviour and the one the user would\n     *  expect).\n     */\n    // closeUser(userId:any): void {\n\n    //   let index: number = -1;\n\n    //   let counter = 0;\n    //   for (let link of this.navLinks) {\n    //     if(link.id == userId){\n    //       index = counter;\n    //       break;\n    //     }\n    //     counter++;\n    //   }\n\n    //   if(index > -1){\n    //     if(userId == this.activeUserId) {\n    //       this.back();\n    //     }\n    //     this.navLinks.splice(index, 1);\n    //   }\n    // }\n\n    /** A supplementary method used by component's template. We are recognising 3 types of tabs: permament tabs (which\n     *  we are going to display as \"normal\" text), editing tab with id for title (this happens for a short time starting\n     *  from moment the tab is open until the user is fetched from the backend), editing tab with user's name\n     *  for title. The last two will be displayed differently from each other so it would be obvious for the user\n     *  what the titles stand for */\n    public titleType (link: any): number {\n      if(link.label.id == 0) { // a permament tab (e.g. \"Vehicle List\"). We are going to display its label as \"normal\" link\n        return 0;\n      } else if(link.label.indexOf(\"id\") == 0) { // editing tab with id for title\n        return 1;\n      } else { // editing tab with registration plate for title\n        return 0;\n      }\n    }\n\n    /** Updates tab title after it was created. Method would be called externally by the child component when the entire user\n     *  object is fetched from the backend. The tab will be identified by its userId value (since having multiple tabs open\n     *  against the same user doesn't make sense)\n     */\n    // public updateTabTitle (userId: number, name: string): void {\n    //   for (let link of this.navLinks) {\n    //     if(link.id == userId) {\n    //       link.label = name;\n    //       break;\n    //     }\n    //   }\n    // }\n\n    // ngOnDestroy() {\n    //   this.storeProperties();\n    // }\n\n    // // ngOnDestroy will be only called if the user navigates to a different route. If she just closes\n    // // the document destructor will not be called. Here we cover closing document.\n    // @HostListener('window:beforeunload', [ '$event' ])\n    // beforeUnloadHander(event: any) {\n    //     this.ngOnDestroy();\n    // }\n\n    // private storeProperties() {\n\n    //   //console.log(this.historyService.currentUrl);\n    //   this.localStorageService.set(this.constructor.name+'.navLinks', this.navLinks);\n    //   this.localStorageService.set(this.constructor.name+'.lastRoute', this.historyService.currentUrl);\n    //       // when storing properties we also want to store current URL, which we will redirect to when\n    //       // the user navigates back to this section of the application. This way navigation would feel\n    //       // less obtrusive and would allow the user to freely navigate between sections without losing\n    //       // focus to the last used tab\n    // }\n\n    // private restoreProperties() {\n    //   let navLinks = <NavLink[]> this.localStorageService.get(this.constructor.name+'.navLinks');\n    //   if(navLinks != null) {\n    //     this.navLinks = navLinks;\n    //   }\n    // }\n}\n\nclass NavLink {\n  label: string;\n  ref: string;\n  id: number;\n  default: boolean;\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/konstantin/svn/rota-client/src/app/admin/schedule3/schedule.component.ts","import { NgModule }       from '@angular/core';\nimport { CommonModule }   from '@angular/common';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport {\n  MatAutocompleteModule,\n  MatButtonModule,\n  MatButtonToggleModule,\n  MatCardModule,\n  MatCheckboxModule,\n  MatChipsModule,\n  MatDatepickerModule,\n  MatDialogModule,\n  MatExpansionModule,\n  MatGridListModule,\n  MatIconModule,\n  MatInputModule,\n  MatListModule,\n  MatMenuModule,\n  MatNativeDateModule,\n  MatPaginatorModule,\n  MatProgressBarModule,\n  MatProgressSpinnerModule,\n  MatRadioModule,\n  MatRippleModule,\n  MatSelectModule,\n  MatSidenavModule,\n  MatSliderModule,\n  MatSlideToggleModule,\n  MatSnackBarModule,\n  MatSortModule,\n  MatTableModule,\n  MatTabsModule,\n  MatToolbarModule,\n  MatTooltipModule,} from '@angular/material';\nimport { DataSource, CdkTableModule } from '@angular/cdk/table';\nimport { FormsModule, ReactiveFormsModule }   from '@angular/forms';\n\n/** Importing local components */\nimport { ScheduleComponent3 }    from './schedule.component';\nimport { Manage3Component } from './manage.component';\nimport { ConfirmDialog } from './manage/confirm-assignment-erase';\n\nimport { RouterModule, Routes } from '@angular/router';\n//import { AuthGuard }            from '../../auth-guard.service';\n\nexport const scheduleRoutes: Routes = [\n  {\n    path: '',\n    component: ScheduleComponent3,\n      //   canActivate: [AuthGuard],\n    children: [\n      { path: '', pathMatch: 'full', redirectTo: 'manage' },\n      { path: 'manage', component: Manage3Component },\n    ]\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatAutocompleteModule,\n    MatButtonModule,\n    MatButtonToggleModule,\n    MatCardModule,\n    MatCheckboxModule,\n    MatChipsModule,\n    MatDatepickerModule,\n    MatDialogModule,\n    MatExpansionModule,\n    MatGridListModule,\n    MatIconModule,\n    MatInputModule,\n    MatListModule,\n    MatMenuModule,\n    MatNativeDateModule,\n    MatPaginatorModule,\n    MatProgressBarModule,\n    MatProgressSpinnerModule,\n    MatRadioModule,\n    MatRippleModule,\n    MatSelectModule,\n    MatSidenavModule,\n    MatSliderModule,\n    MatSlideToggleModule,\n    MatSnackBarModule,\n    MatSortModule,\n    MatTableModule,\n    MatTabsModule,\n    MatToolbarModule,\n    MatTooltipModule,\n    CdkTableModule,\n    FormsModule,\n    ReactiveFormsModule,\n    RouterModule.forChild(scheduleRoutes)\n  ],\n  declarations: [\n    ScheduleComponent3,\n      Manage3Component,\n      ConfirmDialog \n  ],\n    providers: [],\n    entryComponents: [ConfirmDialog],\n})\n\nexport class Schedule3Module {}\n\n\n\n// WEBPACK FOOTER //\n// /home/konstantin/svn/rota-client/src/app/admin/schedule3/schedule3.module.ts","// import { Component } from '@angular/core';\nimport { Location } from '@angular/common';\nimport { Router } from '@angular/router';\n// import { ActivatedRoute, Params }  from '@angular/router';\n// import 'rxjs/add/operator/switchMap';\n// import { MdTabsModule } from '@angular/material';\n\n\nexport class TabbedComponent  {\n\n    /** Stores history of visited tabs */\n    protected history: any[] = [];\n    /** Stores tabs */\n    protected navLinks: NavLink[] = [];\n    /** Active tab id */\n    public activeId: number;\n    /** route to the tabbed component. The child class must set this for the navigation features to work */\n    protected componentUrl: string = '';\n\n    constructor(protected location: Location,\n                protected router: Router) {}\n\n    protected back() {\n        this.history.pop();\n        let hisEntry;\n        do{\n           hisEntry = this.history.pop();\n        } while(hisEntry!=null && this.activeId == hisEntry.id);\n         \n\n        if(hisEntry == null){\n            console.log(\"wow\");\n            let defaultUrl = this.getDefaultUrl();\n            this.router.navigate([this.componentUrl, defaultUrl]);\n        }\n        else {\n            let isPresent = false   // this is the indication whether the tab exists\n            for(let e of this.navLinks) {\n                if(e.id == hisEntry.id) {\n                    isPresent = true;\n                    break;\n                }\n            }\n\n            if(!isPresent) {\n                this.back();\n            }\n            else {\n                this.router.navigate([this.componentUrl+'/'+this.getUrl(hisEntry.id)]);\n            }\n        }\n    }\n\n    public getDefaultUrl() {\n        for(let e of this.navLinks) {\n            if(e.default == true) {\n                return e.ref;\n            }\n        }\n    }\n\n    protected getUrl(id: number) {\n        let url = '';\n        for(let e of this.navLinks) {\n            if(e.id == id) {\n                url = e.ref;\n                break;\n            }\n        }\n        return url;\n    }\n\n    public pushHistory(id: number) {\n      this.history.push({id: id});\n    }\n\n    public clearInvalidTabs() {\n        this.navLinks = this.navLinks.filter((v) => {\n            if(typeof v == 'undefined')\n                return false;\n            else\n                return true;\n        });\n    }\n}\n\nexport class NavLink {\n  label: string;\n  ref: string;\n  id: number;\n  default: boolean;\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/konstantin/svn/rota-client/src/app/model/tabbed.component.ts"],"sourceRoot":""}